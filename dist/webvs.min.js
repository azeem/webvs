window.Webvs=function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=141)}([function(t,e,r){"use strict";function n(){}function o(t,e){for(var r=0,n=e;r<n.length;r++){var o=n[r];if(!(o in t))throw new Error("Required option "+o+" not found")}}function a(t){return t+(parseFloat(t)%1==0?".0":"")}function i(t){return Array.isArray(t)&&3===t.length}function s(t){if(i(t))return t;t=t.toLowerCase();var e=t.match(/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/);if(e)return b.default([y.default(m.default,3),y.default(_.default,function(t){return parseInt(t,16)})])(e);if(e=t.match(/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/))return b.default([y.default(m.default,3),y.default(_.default,function(t){return Math.min(parseInt(t,10),255)})])(e);throw new Error("Invalid Color Format")}function u(t){return _.default(s(t),function(t){return t/255})}function c(t,e){var r,n=t.split("\n"),o=n.length.toString().length,a=e.match(/(\d+):(\d+)/);a&&(r=[parseInt(a[1],10),parseInt(a[2],10)]);var i=_.default(n,function(t,n){var a,i=n+1+"";for(a=0;a<o-i.length;a++)i="0"+i;var s="";if(r&&r[1]===n+1){var u="";for(a=0;a<r[0]+o+2;a++)u+=" ";s="\n"+u+"^\n"+u+e}return i+": "+t+s}).join("\n");console.log("Shader Error : \n"+i)}function f(t,e){var r=[];e=e||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)r.push(e.charAt(Math.floor(Math.random()*e.length)));return r.join("")}function l(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function p(t,e,r){return Math.min(Math.max(t,e),r)}function h(t,e){"string"==typeof e&&(e=e.split("."));var r=t[e.shift()];if(r)return e.length>0?h(r,e):r}function d(t,e,r){"string"==typeof e&&(e=e.split("."));var n=e.shift();0===e.length?t[n]=r:d(t[n],e,r)}function v(t,e){return void 0===e&&(e="\n"),"string"==typeof t?t:t.join(e)}e.__esModule=!0;var b=r(117),_=r(13),y=r(124),m=r(83);e.noop=n,e.checkRequiredOptions=o,e.glslFloatRepr=a,e.parseColor=s,e.parseColorNorm=u,e.logShaderError=c;!function(t){t[t.REPLACE=1]="REPLACE",t[t.MAXIMUM=2]="MAXIMUM",t[t.AVERAGE=3]="AVERAGE",t[t.ADDITIVE=4]="ADDITIVE",t[t.SUBTRACTIVE1=5]="SUBTRACTIVE1",t[t.SUBTRACTIVE2=6]="SUBTRACTIVE2",t[t.MULTIPLY=7]="MULTIPLY",t[t.MULTIPLY2=8]="MULTIPLY2",t[t.ADJUSTABLE=9]="ADJUSTABLE",t[t.ALPHA=10]="ALPHA"}(e.BlendMode||(e.BlendMode={}));!function(t){t[t.CENTER=0]="CENTER",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT"}(e.Channels||(e.Channels={}));!function(t){t[t.SPECTRUM=1]="SPECTRUM",t[t.WAVEFORM=2]="WAVEFORM"}(e.Source||(e.Source={})),e.randString=f;!function(t){t.TEXTURE2D="texture2D",t._1F="1f",t._2F="2f",t._3F="3f",t._4F="4f",t._1I="1i",t._2I="2i",t._3I="3i",t._4I="4i",t._1FV="1fv",t._2FV="2fv",t._3FV="3fv",t._4FV="4fv",t._1IV="1iv",t._2IV="2iv",t._3IV="3iv",t._4IV="4iv"}(e.WebGLVarType||(e.WebGLVarType={})),e.isTypedArray=l,e.clamp=p,e.getProperty=h,e.setProperty=d,e.flatString=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Array.isArray;e.default=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(47),a=r(24),i=r(38),s=r(108),u=r(110),c=r(219),f=r(224),l=r(76),p=function(t){function e(e,r,n){var o=t.call(this)||this;o.main=e,o.parent=r,o.id=n.id,o.id||(o.id=f.default(o.constructor.componentName+"_")),o.enabled=!!u.default(n.enabled)||n.enabled,o.opts=c.default(n,["id","enabled"]);var i=o.constructor.defaultOptions;return i&&(o.opts=a.default(o.opts,i)),o.init(),o}return n(e,t),e.getComponentName=function(){return this.componentName},e.getComponentTag=function(){return this.componentTag},e.prototype.isEnabled=function(){return this.enabled},e.prototype.getId=function(){return this.id},e.prototype.getLastError=function(){return this.lastError},e.prototype.destroy=function(){this.stopListening()},e.prototype.setParent=function(t){this.parent=t},e.prototype.toJSON=function(){var t=o.default(this.opts);return t.id=this.id,t.type=this.constructor.componentName,t.enabled=this.enabled,t},e.prototype.get=function(t){return"enabled"===t?this.enabled:"id"===t?this.id:this.opts[t]},e.prototype.getPath=function(){return u.default(this.parent)||u.default(this.id)?this.constructor.componentName+"#Main":this.parent.getPath()+"/"+this.constructor.componentName+"#"+this.id},e.prototype.setAttribute=function(t,e,r){var n=this.get(t);if("type"===t||s.default(e,n))return!1;"enabled"===t?this.enabled=e:"id"===t?this.id=e:this.opts[t]=e;var o=this.constructor.optUpdateHandlers;if(o)try{for(var a=i.default([o[t]||[],o["*"]||[]]),u=0,c=a;u<c.length;u++){this[c[u]].call(this,e,t,n)}}catch(o){"enabled"===t?this.enabled=n:"id"===t?this.id=n:this.opts[t]=n,this.lastError=o,this.emit("error:"+t,this,e,r,o)}return!0},e.componentName="Component",e.componentTag="",e.optUpdateHandlers=null,e.defaultOptions={},e}(l.default);e.default=p},function(t,e,r){"use strict";e.__esModule=!0;var n=r(24),o=r(12),a=r(277),i=r(0),s=r(29),u=r(85),c=function(){function t(e,r){var a=this;r=n.default(r,{blendMode:i.BlendMode.REPLACE,blendValue:.5,copyOnSwap:!1,dynamicBlend:!1,swapFrame:!1});var s=["\n            precision mediump float;\n            varying vec2 v_position;\n            uniform vec2 u_resolution;\n            uniform sampler2D u_srcTexture;\n\n            #define PI "+Math.PI+"\n            #define getSrcColorAtPos(pos) (texture2D(u_srcTexture, pos))\n            #define setPosition(pos) (v_position = (((pos)+1.0)/2.0),gl_Position = vec4((pos), 0, 1))\n        "],c=["\n            precision mediump float;\n            varying vec2 v_position;\n            uniform vec2 u_resolution;\n            uniform sampler2D u_srcTexture;\n\n            #define PI "+Math.PI+"\n            #define getSrcColorAtPos(pos) (texture2D(u_srcTexture, pos))\n            #define getSrcColor() (texture2D(u_srcTexture, v_position))\n        "];if(this.rctx=e,this.swapFrame=r.swapFrame,this.copyOnSwap=r.copyOnSwap,this.blendValue=r.blendValue,this.blendMode=r.blendMode,this.dynamicBlend=r.dynamicBlend,this.dynamicBlend)c.push("\n                uniform int u_blendMode;\n                void setFragColor(vec4 color) {\n            "),o.default(t.shaderBlendEq,function(t,e){c.push("\n                    if(u_blendMode == "+e+") {\n                        gl_FragColor = ("+t+");\n                    } else\n                ")}),c.push("\n                    {\n                        gl_FragColor = color;\n                    }\n                }\n            ");else if(this._isShaderBlend(this.blendMode)){var f=t.shaderBlendEq[this.blendMode];c.push("#define setFragColor(color) (gl_FragColor = ("+f+"))")}else c.push("#define setFragColor(color) (gl_FragColor = color)");if(this.drawHook=r.drawHook,this.vertexSrc=s.join("\n")+"\n",r.vertexShader)this.vertexSrc+=i.flatString(r.vertexShader);else{this.vertexSrc+="\n                attribute vec2 a_position;\n                void main() {\n                   setPosition(a_position);\n                }\n            ";var l=this.drawHook;this.drawHook=function(t,e,r){l&&l(t,e,r),a.setAttrib("a_position",u.squareGeometry(a.rctx)),e.drawArrays(e.TRIANGLES,0,6)}}this.fragmentSrc=c.join("\n")+"\n"+i.flatString(r.fragmentShader),this.locations={},this.textureVars=[],this.enabledAttribs=[],this.bindings=r.bindings||{},this._compile()}return t.prototype.run=function(t,e,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var o=this.rctx.getGl(),a=o.getParameter(o.CURRENT_PROGRAM);if(o.useProgram(this.program),r&&!this.dynamicBlend)throw new Error("Cannot set blendmode at runtime. Use dynamicBlend");for(r=r||this.blendMode,n="number"==typeof n?n:this.blendValue,t&&(this.setUniform("u_resolution",i.WebGLVarType._2F,o.drawingBufferWidth,o.drawingBufferHeight),this.swapFrame||this._isShaderBlend(r)?(this.setUniform("u_srcTexture",i.WebGLVarType.TEXTURE2D,t.getCurrentTexture()),t.switchTexture(),this.copyOnSwap&&t.copyOver()):this.dynamicBlend&&this.setUniform("u_srcTexture",i.WebGLVarType.TEXTURE2D,null)),this.dynamicBlend&&this.setUniform("u_blendMode",i.WebGLVarType._1I,r),this._setGlBlendMode(r,n),this.draw(e);this.enabledAttribs.length;)o.disableVertexAttribArray(this.enabledAttribs.shift());o.disable(o.BLEND),o.useProgram(a)},t.prototype.getLocation=function(t,e){void 0===e&&(e=!1);var r=this.locations[t];if(void 0===r){var n=this.rctx.getGl();r=e?n.getAttribLocation(this.program,t):n.getUniformLocation(this.program,t),this.locations[t]=r}return r},t.prototype.getTextureId=function(t){var e=a.default(this.textureVars,t);return-1===e&&(this.textureVars.push(t),e=this.textureVars.length-1),e},t.prototype.setUniform=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=this.getLocation(t),a=this.rctx.getGl();switch(e){case"texture2D":var i=this.getTextureId(t);a.activeTexture(a["TEXTURE"+i]),a.bindTexture(a.TEXTURE_2D,r[0]),a.uniform1i(o,i);break;case"1f":case"2f":case"3f":case"4f":case"1i":case"2i":case"3i":case"4i":a["uniform"+e].apply(a,[o].concat(r));break;case"1fv":case"2fv":case"3fv":case"4fv":case"1iv":case"2iv":case"3iv":case"4iv":var s=r[0];s instanceof Float32Array||(s=new Float32Array(s)),a["uniform"+e].call(a,o,s)}},t.prototype.setIndex=function(t){var e=this.rctx.getGl();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.getGlBuffer())},t.prototype.setAttrib=function(t,e,r,n,o,a,i){void 0===r&&(r=2),void 0===n&&(n=this.rctx.getGl().FLOAT),void 0===o&&(o=!1),void 0===a&&(a=0),void 0===i&&(i=0);var s=this.rctx.getGl(),u=this.getLocation(t,!0);s.bindBuffer(s.ARRAY_BUFFER,e.getGlBuffer()),s.vertexAttribPointer(u,r,n,o,a,i),s.enableVertexAttribArray(u),this.enabledAttribs.push(u)},t.prototype.disableAttrib=function(t){var e=this.getLocation(t,!0);this.rctx.getGl().disableVertexAttribArray(e)},t.prototype.destroy=function(){var t=this.rctx.getGl();t.deleteProgram(this.program),t.deleteShader(this.vertex),t.deleteShader(this.fragment)},t.prototype._isShaderBlend=function(e){return e in t.shaderBlendEq},t.prototype._compile=function(){var t=this.rctx.getGl(),e=this._compileShader(this.vertexSrc,t.VERTEX_SHADER),r=this._compileShader(this.fragmentSrc,t.FRAGMENT_SHADER),n=t.createProgram();if(t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw new Error("Program link Error: "+t.getProgramInfoLog(n));this.vertex=e,this.fragment=r,this.program=n},t.prototype._compileShader=function(t,e){var r=this.rctx.getGl(),n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw i.logShaderError(t,r.getShaderInfoLog(n)),new Error("Shader compilation Error: "+r.getShaderInfoLog(n));return n},t.prototype.draw=function(t){var e=function(t,e){if(t instanceof s.default)return t;throw new Error('Value "'+e+'" should be a Buffer')},r=!1,n=null,o=null;for(var a in this.bindings)if("index"===a){var i=this.bindings[a],u=i.valueName,c=t[u],f=e(c,u);this.setIndex(f),i.drawMode&&(o=f.getLength(),n=i.drawMode,r=!0)}else for(var u in this.bindings[a])if(this.bindings[a].hasOwnProperty(u)){var c=t[u];if("attribs"===a){var i=this.bindings[a][u];if(c){var l=e(c,u);this.setAttrib(i.name,l,i.size,i.valueType,i.normalized,i.stride,i.offset),i.drawMode&&(o=l.getLength()/(i.size||2),n=i.drawMode)}else this.disableAttrib(i.name)}else if("uniforms"===a){var i=this.bindings[a][u];this.setUniform(i.name,i.valueType,c)}}var p=this.rctx.getGl(),h=!1;if(this.drawHook&&(h=!this.drawHook(t,p,this)),!h){if(null===n)throw new Error("Draw unhandled and no bindings containing drawMode.");r?p.drawElements(n,o,p.UNSIGNED_SHORT,0):p.drawArrays(n,0,o)}},t.prototype._setGlBlendMode=function(t,e){var r=this.rctx.getGl();switch(t){case i.BlendMode.ADDITIVE:r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE),r.blendEquation(r.FUNC_ADD);break;case i.BlendMode.SUBTRACTIVE1:r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE),r.blendEquation(r.FUNC_REVERSE_SUBTRACT);break;case i.BlendMode.SUBTRACTIVE2:r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE),r.blendEquation(r.FUNC_SUBTRACT);break;case i.BlendMode.ALPHA:r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.blendEquation(r.FUNC_ADD);break;case i.BlendMode.MULTIPLY2:r.enable(r.BLEND),r.blendFunc(r.DST_COLOR,r.ZERO),r.blendEquation(r.FUNC_ADD);break;case i.BlendMode.ADJUSTABLE:r.enable(r.BLEND),r.blendColor(0,0,0,e),r.blendFunc(r.CONSTANT_ALPHA,r.ONE_MINUS_CONSTANT_ALPHA),r.blendEquation(r.FUNC_ADD);break;case i.BlendMode.AVERAGE:r.enable(r.BLEND),r.blendColor(.5,.5,.5,1),r.blendFunc(r.CONSTANT_COLOR,r.CONSTANT_COLOR),r.blendEquation(r.FUNC_ADD);break;case i.BlendMode.REPLACE:case i.BlendMode.MULTIPLY:case i.BlendMode.MAXIMUM:r.disable(r.BLEND);break;default:throw new Error("Unknown blend mode "+t+" in shader")}},t.shaderBlendEq=(f={},f[i.BlendMode.MAXIMUM]="max(color, texture2D(u_srcTexture, v_position))",f[i.BlendMode.MULTIPLY]="clamp(color * texture2D(u_srcTexture, v_position) * 256.0, 0.0, 1.0)",f),t}();e.default=c;var f},function(t,e,r){"use strict";var n=r(87),o="object"==typeof self&&self&&self.Object===Object&&self,a=n.a||o||Function("return this")();e.a=a},function(t,e,r){"use strict";function n(t){return null!=t&&"object"==typeof t}e.a=n},function(t,e,r){"use strict";function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}e.a=n},function(t,e,r){"use strict";function n(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}e.a=n},function(t,e,r){"use strict";function n(t){return null==t?void 0===t?u:s:c&&c in Object(t)?Object(a.a)(t):Object(i.a)(t)}var o=r(14),a=r(155),i=r(156),s="[object Null]",u="[object Undefined]",c=o.a?o.a.toStringTag:void 0;e.a=n},function(t,e,r){"use strict";function n(t,e){return Object(i.a)(Object(a.a)(t,e,o.a),t+"")}var o=r(18),a=r(101),i=r(69);e.a=n},function(t,e,r){"use strict";function n(t,e){var r=Object(a.a)(t,e);return Object(o.a)(r)?r:void 0}var o=r(153),a=r(159);e.a=n},function(t,e,r){"use strict";function n(t){return Object(i.a)(t)?Object(o.a)(t):Object(a.a)(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(91),a=r(176),i=r(17);e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(244);r.d(e,"default",function(){return n.a})},function(t,e,r){"use strict";function n(t,e){return(Object(s.default)(t)?o.a:i.a)(t,Object(a.a)(e,3))}Object.defineProperty(e,"__esModule",{value:!0});var o=r(7),a=r(27),i=r(123),s=r(1);e.default=n},function(t,e,r){"use strict";var n=r(4),o=n.a.Symbol;e.a=o},function(t,e,r){"use strict";function n(t,e,r,n){var i=!r;r||(r={});for(var s=-1,u=e.length;++s<u;){var c=e[s],f=n?n(r[c],t[c],c,r,t):void 0;void 0===f&&(f=t[c]),i?Object(a.a)(r,c,f):Object(o.a)(r,c,f)}return r}var o=r(53),a=r(89);e.a=n},function(t,e,r){"use strict";function n(t){return function(e){return t(e)}}e.a=n},function(t,e,r){"use strict";function n(t){return null!=t&&Object(a.a)(t.length)&&!Object(o.default)(t)}var o=r(50),a=r(58);e.a=n},function(t,e,r){"use strict";function n(t){return t}e.a=n},function(t,e,r){"use strict";function n(t,e){return Object(o.default)(t)?t:Object(a.a)(t,e)?[t]:Object(i.a)(Object(s.a)(t))}var o=r(1),a=r(71),i=r(200),s=r(105);e.a=n},function(t,e,r){"use strict";function n(t){if("string"==typeof t||Object(o.a)(t))return t;var e=t+"";return"0"==e&&1/t==-a?"-0":e}var o=r(25),a=1/0;e.a=n},function(t,e,r){"use strict";function n(t){var e=Object(o.a)(t),r=e%1;return e===e?r?e-r:e:0}var o=r(262);e.a=n},function(t,e,r){"use strict";function n(t,e){return t===e||t!==t&&e!==e}e.a=n},function(t,e,r){"use strict";function n(t,e){var r=typeof t;return!!(e=null==e?o:e)&&("number"==r||"symbol"!=r&&a.test(t))&&t>-1&&t%1==0&&t<e}var o=9007199254740991,a=/^(?:0|[1-9]\d*)$/;e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(9),o=r(22),a=r(70),i=r(34),s=Object.prototype,u=s.hasOwnProperty,c=Object(n.a)(function(t,e){t=Object(t);var r=-1,n=e.length,c=n>2?e[2]:void 0;for(c&&Object(a.a)(e[0],e[1],c)&&(n=1);++r<n;)for(var f=e[r],l=Object(i.a)(f),p=-1,h=l.length;++p<h;){var d=l[p],v=t[d];(void 0===v||Object(o.a)(v,s[d])&&!u.call(t,d))&&(t[d]=f[d])}return t});e.default=c},function(t,e,r){"use strict";function n(t){return"symbol"==typeof t||Object(a.a)(t)&&Object(o.a)(t)==i}var o=r(8),a=r(5),i="[object Symbol]";e.a=n},function(t,e,r){"use strict";function n(t,e,r,i,s){var u=-1,c=t.length;for(r||(r=a.a),s||(s=[]);++u<c;){var f=t[u];e>0&&r(f)?e>1?n(f,e-1,r,i,s):Object(o.a)(s,f):i||(s[s.length]=f)}return s}var o=r(64),a=r(206);e.a=n},function(t,e,r){"use strict";function n(t){return"function"==typeof t?t:null==t?i.a:"object"==typeof t?Object(s.default)(t)?Object(a.a)(t[0],t[1]):Object(o.a)(t):Object(u.a)(t)}var o=r(232),a=r(235),i=r(18),s=r(1),u=r(237);e.a=n},function(t,e,r){"use strict";function n(t,e,r,n){void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===n&&(n=[]);var a={};for(var c in t)if(t.hasOwnProperty(c)){var f=t[c];b.default(f)&&(f=f.join("\n")),f.trim(),0!==f.length&&(a[c]=f)}var l=o(a),p=i(l,e,r,n);return{codeInst:s(l,p,e),glslCode:u(l,p,r)}}function o(t){var e={};for(var r in t)if(t.hasOwnProperty(r))try{e[r]=S.parse(t[r])}catch(t){throw new Error("Error parsing "+r+" ("+t.line+":"+t.column+") : "+t)}return e}function a(t){return t.every(function(t){return t instanceof M.PrimaryExpr})}function i(t,e,r,n){var o={},i={},s={},u={},f=0,p=function(t,e){if(t instanceof M.Program)for(var n=0,l=t.statements;n<l.length;n++){var h=l[n];p(h,e)}else if(t instanceof M.BinaryExpr)p(t.leftOperand,e),p(t.rightOperand,e);else if(t instanceof M.UnaryExpr)p(t.operand,e);else if(t instanceof M.FuncCall){if(c(t),r.indexOf(e)>=0&&B.indexOf(t.funcName)>=0){var d=t.args;if(!a(d))throw new Error("Non Pre-Computable arguments for "+t.funcName+" in shader code, use variables or constants");var v=[t.funcName].concat(g.default(d,function(t){return t.value})),b=void 0;for(var y in u)if(_.default(u[y],v)){b=y;break}b||(b="__PC_"+t.funcName+"_"+f++,u[b]=v),t.preComputeUniformName=b}o[e].push(t.funcName);for(var m=0,O=t.args;m<O.length;m++){var x=O[m];p(x,e)}}else t instanceof M.Assignment?(p(t.lhs,e),p(t.expr,e)):t instanceof M.PrimaryExpr&&"ID"===t.type?i[e].push(t.value):t instanceof M.PrimaryExpr&&"REG"===t.type&&s[e].push(t.value)};for(var b in t)t.hasOwnProperty(b)&&(o[b]=[],i[b]=[],s[b]=[],p(t[b],b),o[b]=E.default(o[b]),i[b]=E.default(i[b]),s[b]=E.default(s[b]));var y=d.default([O.default(x.default,e),A.default,h.default,E.default])(i),m=d.default([O.default(x.default,r),A.default,h.default,E.default])(i),j=d.default([O.default(l.default,y),O.default(T.default,n),E.default])(m),w=v.default(m,y),C=d.default([O.default(x.default,r),A.default,h.default,E.default])(o);return{glslRegisters:d.default([O.default(x.default,r),A.default,h.default,E.default])(s),glslUsedFuncs:C,glslVars:m,jsVars:y,nonUniforms:j,preCompute:u,register:s,uniforms:w}}function s(t,e,r){for(var n=function(t){if(t instanceof M.BinaryExpr)return"("+n(t.leftOperand)+t.operator+n(t.rightOperand)+")";if(t instanceof M.UnaryExpr)return"("+t.operator+n(t.operand)+")";if(t instanceof M.FuncCall)switch(t.funcName){case"above":return["(",n(t.args[0]),">",n(t.args[1]),"?1:0)"].join("");case"below":return["(",n(t.args[0]),"<",n(t.args[1]),"?1:0)"].join("");case"equal":return["(",n(t.args[0]),"==",n(t.args[1]),"?1:0)"].join("");case"if":return["(",n(t.args[0]),"!==0?",n(t.args[1]),":",n(t.args[2]),")"].join("");case"select":var e=["((function() {"];return e.push("switch("+n(t.args[0])+") {"),p.default(j.default(t.args,t.args.length-1),function(t,r){e.push("case "+r+": return "+n(t)+";")}),e.push("default : throw new Error('Unknown selector value in select');"),e.push("}}).call(this))"),e.join("");case"sqr":return"(Math.pow(("+n(t.args[0])+"),2))";case"band":return"((("+n(t.args[0])+")&&("+n(t.args[1])+"))?1:0)";case"bor":return"((("+n(t.args[0])+")||("+n(t.args[1])+"))?1:0)";case"bnot":return"((!("+n(t.args[0])+"))?1:0)";case"invsqrt":return"(1/Math.sqrt("+n(t.args[0])+"))";case"atan2":return"(Math.atan(("+n(t.args[0])+")/("+n(t.args[1])+")))";default:var r=g.default(t.args,function(t){return n(t)}).join(",");return"("+(P.indexOf(t.funcName)>=0?"Math.":"this.")+t.funcName+"("+r+"))"}if(t instanceof M.Assignment)return n(t.lhs)+"="+n(t.expr);if(t instanceof M.Program){return g.default(t.statements,function(t){return n(t)}).join(";\n")}return t instanceof M.PrimaryExpr&&"VALUE"===t.type?t.value.toString():t instanceof M.PrimaryExpr&&"CONST"===t.type?f(t.value).toString():t instanceof M.PrimaryExpr&&"ID"===t.type?"this."+t.value:t instanceof M.PrimaryExpr&&"REG"===t.type?'this.registerBank["'+t.value+'"]':void 0},o=d.default([A.default,h.default,E.default])(e.register),a=e.glslUsedFuncs.indexOf("rand")>=0,i=new C.default(o,e.glslRegisters,a,e.uniforms,e.preCompute),s=0,u=e.jsVars;s<u.length;s++){i[u[s]]=0}for(var c=0,l=r;c<l.length;c++){var v=l[c],b=t[v];if(b){var _=n(b);i[v]=new Function(_)}else i[v]=w.noop}return i}function u(t,e,r){var n=function(t){if(t instanceof M.BinaryExpr)return"("+n(t.leftOperand)+t.operator+n(t.rightOperand)+")";if(t instanceof M.UnaryExpr)return"("+t.operator+n(t.operand)+")";if(t instanceof M.FuncCall){if(t.preComputeUniformName)return"("+t.preComputeUniformName+")";switch(t.funcName){case"above":return["(",n(t.args[0]),">",n(t.args[1]),"?1.0:0.0)"].join("");case"below":return["(",n(t.args[0]),"<",n(t.args[1]),"?1.0:0.0)"].join("");case"equal":return["(",n(t.args[0]),"==",n(t.args[1]),"?1.0:0.0)"].join("");case"if":return["(",n(t.args[0]),"!=0.0?",n(t.args[1]),":",n(t.args[2]),")"].join("");case"select":var e=n(t.args[0]),r=function(t,o){return 1===t.length?n(t[0]):["(("+e+" === "+o+")?","("+n(t[0])+"):","("+r(j.default(t,t.length-1),o+1)+"))"].join("")};return r(j.default(t.args,t.args.length-1),0);case"sqr":return"(pow(("+n(t.args[0])+"), 2))";case"band":return"(float(("+n(t.args[0])+")&&("+n(t.args[1])+")))";case"bor":return"(float(("+n(t.args[0])+")||("+n(t.args[1])+")))";case"bnot":return"(float(!("+n(t.args[0])+")))";case"invsqrt":return"(1/sqrt("+n(t.args[0])+"))";case"atan2":return"(atan(("+n(t.args[0])+"),("+n(t.args[1])+"))";default:var o=g.default(t.args,function(t){return n(t)}).join(",");return"("+t.funcName+"("+o+"))"}}if(t instanceof M.Assignment)return n(t.lhs)+"="+n(t.expr);if(t instanceof M.Program){return g.default(t.statements,function(t){return n(t)}).join(";\n")+";"}return t instanceof M.PrimaryExpr&&"VALUE"===t.type?w.glslFloatRepr(t.value):t instanceof M.PrimaryExpr&&"CONST"===t.type?f(t.value).toString():t instanceof M.PrimaryExpr&&("ID"===t.type||"REG"===t.type)?t.value:void 0},o=[];o=o.concat(g.default(e.nonUniforms,function(t){return"float "+t+" = 0.0;"})),o=o.concat(g.default(e.uniforms,function(t){return"uniform float "+t+";"})),o=o.concat(d.default([O.default(g.default,function(t){return t in F?F[t]:[]}),h.default])(e.glslUsedFuncs)),o=o.concat(d.default([m.default,O.default(g.default,function(t){return"uniform float "+t+";"})])(e.preCompute));for(var a=0,i=r;a<i.length;a++){var s=i[a],u=t[s];if(u){var c=n(u);o.push("void "+s+"() {"),o.push(c),o.push("}")}else o.push("void "+s+"() {}")}return o.join("\n")}function c(t){var e=R[t.funcName];if(void 0===e)throw Error("Unknown function "+t.funcName);if(y.default(e)){if(t.args.length!==e)throw Error(t.funcName+" accepts "+e+" arguments")}else if(e.min&&t.args.length<e.min)throw Error(t.funcName+" accepts atleast "+e.min+" arguments")}function f(t){switch(t){case"pi":return Math.PI;case"e":return Math.E;case"phi":return 1.6180339887;default:throw new Error("Unknown constant "+t)}}e.__esModule=!0;var l=r(239),p=r(12),h=r(38),d=r(117),v=r(249),b=r(1),_=r(108),y=r(122),m=r(11),g=r(13),O=r(124),x=r(103),j=r(83),T=r(264),E=r(133),A=r(266),w=r(0),M=r(134),C=r(84),S=r(273);e.default=n;var R={above:2,abs:1,acos:1,asin:1,atan:1,atan2:2,band:2,below:2,bnot:1,bor:2,ceil:1,cos:1,equal:2,floor:1,getosc:3,gettime:1,if:3,invsqrt:1,log:1,max:2,min:2,pow:2,rand:1,select:{min:2},sin:1,sqr:1,sqrt:1,tan:1},P=["min","max","sin","cos","abs","tan","asin","acos","atan","log","pow","sqrt","floor","ceil"],B=["getosc","gettime"],F={rand:["uniform vec2 __randStep;","vec2 __randSeed;","float rand(float max) {","   __randSeed += __randStep;","   float val = fract(sin(dot(__randSeed.xy ,vec2(12.9898,78.233))) * 43758.5453);","   return (floor(val*max)+1);","}"].join("\n")}},function(t,e,r){"use strict";e.__esModule=!0;var n=r(0),o=function(){function t(t,e,r){void 0===e&&(e=!1);var n=t.getGl();this.type=e?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,this.rctx=t,this.glBuffer=n.createBuffer(),this.length=0,r&&this.setData(r)}return t.prototype.setData=function(t){n.isTypedArray(t)||(t=new Float32Array(t));var e=this.rctx.getGl();this.length=t.length,e.bindBuffer(this.type,this.glBuffer),e.bufferData(this.type,t,e.STATIC_DRAW)},t.prototype.getGlBuffer=function(){return this.glBuffer},t.prototype.getLength=function(){return this.length},t.prototype.destroy=function(){this.rctx.getGl().deleteBuffer(this.glBuffer)},t}();e.default=o},function(t,e,r){"use strict";function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(143),a=r(144),i=r(145),s=r(146),u=r(147);n.prototype.clear=o.a,n.prototype.delete=a.a,n.prototype.get=i.a,n.prototype.has=s.a,n.prototype.set=u.a,e.a=n},function(t,e,r){"use strict";function n(t,e){for(var r=t.length;r--;)if(Object(o.a)(t[r][0],e))return r;return-1}var o=r(22);e.a=n},function(t,e,r){"use strict";var n=r(10),o=Object(n.a)(Object,"create");e.a=o},function(t,e,r){"use strict";function n(t,e){var r=t.__data__;return Object(o.a)(e)?r["string"==typeof e?"string":"hash"]:r.map}var o=r(168);e.a=n},function(t,e,r){"use strict";function n(t){return Object(i.a)(t)?Object(o.a)(t,!0):Object(a.a)(t)}var o=r(91),a=r(179),i=r(17);e.a=n},function(t,e,r){"use strict";var n=r(184),o=r(49),a=r(185),i=r(98),s=r(99),u=r(8),c=r(88),f=Object(c.a)(n.a),l=Object(c.a)(o.a),p=Object(c.a)(a.a),h=Object(c.a)(i.a),d=Object(c.a)(s.a),v=u.a;(n.a&&"[object DataView]"!=v(new n.a(new ArrayBuffer(1)))||o.a&&"[object Map]"!=v(new o.a)||a.a&&"[object Promise]"!=v(a.a.resolve())||i.a&&"[object Set]"!=v(new i.a)||s.a&&"[object WeakMap]"!=v(new s.a))&&(v=function(t){var e=Object(u.a)(t),r="[object Object]"==e?t.constructor:void 0,n=r?Object(c.a)(r):"";if(n)switch(n){case f:return"[object DataView]";case l:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return e}),e.a=v},function(t,e,r){"use strict";var n=r(6),o=Object.create,a=function(){function t(){}return function(e){if(!Object(n.a)(e))return{};if(o)return o(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();e.a=a},function(t,e,r){"use strict";function n(t,e){e=Object(o.a)(e,t);for(var r=0,n=e.length;null!=t&&r<n;)t=t[Object(a.a)(e[r++])];return r&&r==n?t:void 0}var o=r(19),a=r(20);e.a=n},function(t,e,r){"use strict";function n(t){return(null==t?0:t.length)?Object(o.a)(t,1):[]}Object.defineProperty(e,"__esModule",{value:!0});var o=r(26);e.default=n},function(t,e,r){"use strict";function n(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new o.a;++e<r;)this.add(t[e])}var o=r(51),a=r(213),i=r(214);n.prototype.add=n.prototype.push=a.a,n.prototype.has=i.a,e.a=n},function(t,e,r){"use strict";function n(t,e){return t.has(e)}e.a=n},function(t,e,r){"use strict";function n(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(o);++n<o;)a[n]=t[n+e];return a}e.a=n},function(t,e,r){"use strict";var n=r(228),o=r(231),a=Object(o.a)(n.a);e.a=a},function(t,e,r){"use strict";function n(t,e){return!!(null==t?0:t.length)&&Object(o.a)(t,e,0)>-1}var o=r(115);e.a=n},function(t,e,r){"use strict";function n(t){return Object(a.a)(t)&&Object(o.a)(t)}var o=r(17),a=r(5);e.a=n},function(t,e,r){"use strict";function n(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Object(o.a)(t.prototype),n=t.apply(r,e);return Object(a.a)(n)?n:r}}var o=r(36),a=r(6);e.a=n},function(t,e,r){"use strict";function n(t,e){for(var r=-1,n=t.length,a=0,i=[];++r<n;){var s=t[r];s!==e&&s!==o||(t[r]=o,i[a++]=r)}return i}var o="__lodash_placeholder__";e.a=n},function(t,e,r){"use strict";function n(t){return Object(o.a)(t,a)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(86),a=4;e.default=n},function(t,e,r){"use strict";function n(t){var e=this.__data__=new o.a(t);this.size=e.size}var o=r(30),a=r(148),i=r(149),s=r(150),u=r(151),c=r(152);n.prototype.clear=a.a,n.prototype.delete=i.a,n.prototype.get=s.a,n.prototype.has=u.a,n.prototype.set=c.a,e.a=n},function(t,e,r){"use strict";var n=r(10),o=r(4),a=Object(n.a)(o.a,"Map");e.a=a},function(t,e,r){"use strict";function n(t){if(!Object(a.a)(t))return!1;var e=Object(o.a)(t);return e==s||e==u||e==i||e==c}Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(6),i="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";e.default=n},function(t,e,r){"use strict";function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(160),a=r(167),i=r(169),s=r(170),u=r(171);n.prototype.clear=o.a,n.prototype.delete=a.a,n.prototype.get=i.a,n.prototype.has=s.a,n.prototype.set=u.a,e.a=n},function(t,e,r){"use strict";function n(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}e.a=n},function(t,e,r){"use strict";function n(t,e,r){var n=t[e];s.call(t,e)&&Object(a.a)(n,r)&&(void 0!==r||e in t)||Object(o.a)(t,e,r)}var o=r(89),a=r(22),i=Object.prototype,s=i.hasOwnProperty;e.a=n},function(t,e,r){"use strict";function n(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}e.a=n},function(t,e,r){"use strict";var n=r(173),o=r(5),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,u=Object(n.a)(function(){return arguments}())?n.a:function(t){return Object(o.a)(t)&&i.call(t,"callee")&&!s.call(t,"callee")};e.a=u},function(t,e,r){"use strict";(function(t){var n=r(4),o=r(174),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===a,u=s?n.a.Buffer:void 0,c=u?u.isBuffer:void 0,f=c||o.a;e.a=f}).call(e,r(57)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,r){"use strict";function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}var o=9007199254740991;e.a=n},function(t,e,r){"use strict";(function(t){var n=r(87),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,i=a&&a.exports===o,s=i&&n.a.process,u=function(){try{return s&&s.binding&&s.binding("util")}catch(t){}}();e.a=u}).call(e,r(57)(t))},function(t,e,r){"use strict";function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||o)}var o=Object.prototype;e.a=n},function(t,e,r){"use strict";function n(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}e.a=n},function(t,e,r){"use strict";var n=r(63),o=r(94),a=Object.prototype,i=a.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(t){return null==t?[]:(t=Object(t),Object(n.a)(s(t),function(e){return i.call(t,e)}))}:o.a;e.a=u},function(t,e,r){"use strict";function n(t,e){for(var r=-1,n=null==t?0:t.length,o=0,a=[];++r<n;){var i=t[r];e(i,r,t)&&(a[o++]=i)}return a}e.a=n},function(t,e,r){"use strict";function n(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}e.a=n},function(t,e,r){"use strict";var n=r(93),o=Object(n.a)(Object.getPrototypeOf,Object);e.a=o},function(t,e,r){"use strict";function n(t){return Object(o.a)(t,i.a,a.a)}var o=r(97),a=r(95),i=r(34);e.a=n},function(t,e,r){"use strict";function n(t){var e=new t.constructor(t.byteLength);return new o.a(e).set(new o.a(t)),e}var o=r(100);e.a=n},function(t,e,r){"use strict";function n(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}e.a=n},function(t,e,r){"use strict";var n=r(197),o=r(102),a=Object(o.a)(n.a);e.a=a},function(t,e,r){"use strict";function n(t,e,r){if(!Object(s.a)(r))return!1;var n=typeof e;return!!("number"==n?Object(a.a)(r)&&Object(i.a)(e,r.length):"string"==n&&e in r)&&Object(o.a)(r[e],t)}var o=r(22),a=r(17),i=r(23),s=r(6);e.a=n},function(t,e,r){"use strict";function n(t,e){if(Object(o.default)(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Object(a.a)(t))||(s.test(t)||!i.test(t)||null!=e&&t in Object(e))}var o=r(1),a=r(25),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.a=n},function(t,e,r){"use strict";function n(t){return Object(i.a)(Object(a.a)(t,void 0,o.default),t+"")}var o=r(38),a=r(101),i=r(69);e.a=n},function(t,e,r){"use strict";function n(t){return"string"==typeof t||!Object(a.default)(t)&&Object(i.a)(t)&&Object(o.a)(t)==s}Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(1),i=r(5),s="[object String]";e.default=n},function(t,e,r){"use strict";function n(t,e,r,i,s){return t===e||(null==t||null==e||!Object(a.a)(t)&&!Object(a.a)(e)?t!==t&&e!==e:Object(o.a)(t,e,r,i,n,s))}var o=r(212),a=r(5);e.a=n},function(t,e,r){"use strict";function n(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}e.a=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(225),a=r(226),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.subscriptions=[],e}return n(e,t),e.prototype.set=function(t,e,r){var n;if("string"==typeof t){r=r||{};var o=void 0===r.silent;n=this.setAttribute(t,e,r),n&&!o&&(this.emit("change:"+t,this,e,r),this.emit("change",this,r))}else{r=e||{};var o=void 0===r.silent,a=t;n=!1;for(t in a)this.setAttribute(t,a[t],r)&&(n=!0,o||this.emit("change:"+t,this,a[t],r));n&&!o&&this.emit("change",this,r)}return n},e.prototype.listenTo=function(t,e,r){t.addListener(e,r),this.subscriptions.push({emitter:t,event:e,callback:r})},e.prototype.stopListening=function(t,e,r){var n={};t&&(n.emitter=t),e&&(n.event=e),t&&(n.callback=r),a.default(this.subscriptions,n).forEach(function(t){t.emitter.removeListener(t.event,t.callback)})},e}(o);e.default=i},function(t,e,r){"use strict";function n(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}e.a=n},function(t,e,r){"use strict";function n(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}var o=r(36),a=r(79);n.prototype=Object(o.a)(a.a.prototype),n.prototype.constructor=n,e.a=n},function(t,e,r){"use strict";function n(){}e.a=n},function(t,e,r){"use strict";var n=r(118),o=r(119),a=n.a?function(t){return n.a.get(t)}:o.a;e.a=a},function(t,e,r){"use strict";function n(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=i,this.__views__=[]}var o=r(36),a=r(79),i=4294967295;n.prototype=Object(o.a)(a.a.prototype),n.prototype.constructor=n,e.a=n},function(t,e,r){"use strict";function n(t){return t.placeholder}e.a=n},function(t,e,r){"use strict";function n(t,e,r){var n=null==t?0:t.length;return n?(e=r||void 0===e?1:Object(a.a)(e),e=n-e,Object(o.a)(t,e<0?0:e,n)):[]}Object.defineProperty(e,"__esModule",{value:!0});var o=r(41),a=r(21);e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=r(268),o=r(12),a=r(135),i=r(271),s=r(1),u=r(50),c=r(73),f=r(13),l=r(136),p=r(137),h=r(0),d=function(){function t(t,e,r,n,o){this.registerUsages=t,this.glslRegisters=e,this.hasRandom=r,this.uniforms=n,this.preCompute=o}return t.clone=function(e,r){var n;s.default(e)?n=e:(e.cid=0,n=[e]);var o=n.length;return o<r?p.default(r-o,function(e){var r=Object.create(t.prototype);a.default(r,n[0]),r.cid=e+o,n.push(r)}):o>r&&(n=l.default(n,r)),n},t.copyValues=function(t,e){o.default(e,function(e,r){u.default(e)||"_"===r.charAt(0)||(t[r]=e)})},t.prototype.rand=function(t){return Math.floor(Math.random()*t)+1},t.prototype.gettime=function(t){switch(t){case 0:return((new Date).getTime()-this.bootTime)/1e3;default:throw new Error("Invalid startTime mode for gettime call")}},t.prototype.getosc=function(t,e,r){for(var n=this.analyser.getWaveform(),o=Math.floor((t-e/2)*(n.length-1)),a=Math.floor((t+e/2)*(n.length-1)),i=0,s=o;s<=a;s++)i+=n[s];return i/(a-o+1)},t.prototype.bindUniforms=function(t){var e=this;if(o.default(this.uniforms,function(r){t.setUniform(r,h.WebGLVarType._1F,e[r])}),o.default(this.glslRegisters,function(r){t.setUniform(r,h.WebGLVarType._1F,e.registerBank[r])}),this.hasRandom){var r=[Math.random()/100,Math.random()/100];t.setUniform("__randStep",h.WebGLVarType._2FV,r)}o.default(this.preCompute,function(r,o){var a=f.default(n.default(r),function(t){return c.default(t)?"__REG"===t.substring(0,5)?e.registerBank[t]:e[t]:t}),i=e[r[0]].apply(e,a);t.setUniform(o,h.WebGLVarType._1F,i)})},t.prototype.setup=function(t){var e=this;this.registerBank=t.getRegisterBank(),this.bootTime=t.getBootTime(),this.analyser=t.getAnalyser(),this.updateDimVars(t.getRctx().getGl()),o.default(this.registerUsages,function(t){i.default(e.registerBank,t)||(e.registerBank[t]=0)})},t.prototype.updateDimVars=function(t){this.w=t.drawingBufferWidth,this.h=t.drawingBufferHeight},t}();e.default=d},function(t,e,r){"use strict";function n(t,e){void 0===e&&(e=100);var r="CircleGeometry_"+e,n=t.getBuffer(r);if(n)return n;var o=new Float32Array(2*(e+2)),i=0;o[i++]=0,o[i++]=0;for(var s=0;s<e;s++)o[i++]=Math.sin(2*s*Math.PI/e),o[i++]=Math.cos(2*s*Math.PI/e);return o[i++]=o[2],o[i++]=o[3],n=new a.default(t,!1,o),t.cacheBuffer(r,n),n}function o(t,e){void 0===e&&(e=!1);var r="SquareGeometry_"+e,n=t.getBuffer(r);if(n)return n;var o;return o=e?[0,0,0,1,1,1,0,0,1,1,1,0]:[-1,-1,1,-1,-1,1,-1,1,1,-1,1,1],n=new a.default(t,!1,o),t.cacheBuffer(r,n),n}e.__esModule=!0;var a=r(29);e.circleGeometry=n,e.squareGeometry=o},function(t,e,r){"use strict";function n(t,e,r,B,F,L){var U,I=e&E,D=e&A,N=e&w;if(r&&(U=F?r(t,B,F,L):r(t)),void 0!==U)return U;if(!Object(x.a)(t))return t;var G=Object(m.default)(t);if(G){if(U=Object(b.a)(t),!I)return Object(f.a)(t,U)}else{var V=Object(v.a)(t),k=V==C||V==S;if(Object(g.a)(t))return Object(c.a)(t,I);if(V==R||V==M||k&&!F){if(U=D||k?{}:Object(y.a)(t),!I)return D?Object(p.a)(t,Object(u.a)(U,t)):Object(l.a)(t,Object(s.a)(U,t))}else{if(!P[V])return F?t:{};U=Object(_.a)(t,V,I)}}L||(L=new o.a);var z=L.get(t);if(z)return z;if(L.set(t,U),Object(j.a)(t))return t.forEach(function(o){U.add(n(o,e,r,o,t,L))}),U;if(Object(O.a)(t))return t.forEach(function(o,a){U.set(a,n(o,e,r,a,t,L))}),U;var q=N?D?d.a:h.a:D?keysIn:T.default,W=G?void 0:q(t);return Object(a.a)(W||t,function(o,a){W&&(a=o,o=t[a]),Object(i.a)(U,a,n(o,e,r,a,t,L))}),U}var o=r(48),a=r(52),i=r(53),s=r(172),u=r(178),c=r(181),f=r(61),l=r(182),p=r(183),h=r(96),d=r(66),v=r(35),b=r(186),_=r(187),y=r(192),m=r(1),g=r(56),O=r(193),x=r(6),j=r(195),T=r(11),E=1,A=2,w=4,M="[object Arguments]",C="[object Function]",S="[object GeneratorFunction]",R="[object Object]",P={};P[M]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[R]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[C]=P["[object WeakMap]"]=!1,e.a=n},function(t,e,r){"use strict";(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.a=r}).call(e,r(154))},function(t,e,r){"use strict";function n(t){if(null!=t){try{return a.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var o=Function.prototype,a=o.toString;e.a=n},function(t,e,r){"use strict";function n(t,e,r){"__proto__"==e&&o.a?Object(o.a)(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var o=r(90);e.a=n},function(t,e,r){"use strict";var n=r(10),o=function(){try{var t=Object(n.a)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.a=o},function(t,e,r){"use strict";function n(t,e){var r=Object(i.default)(t),n=!r&&Object(a.a)(t),f=!r&&!n&&Object(s.a)(t),p=!r&&!n&&!f&&Object(c.a)(t),h=r||n||f||p,d=h?Object(o.a)(t.length,String):[],v=d.length;for(var b in t)!e&&!l.call(t,b)||h&&("length"==b||f&&("offset"==b||"parent"==b)||p&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||Object(u.a)(b,v))||d.push(b);return d}var o=r(54),a=r(55),i=r(1),s=r(56),u=r(23),c=r(92),f=Object.prototype,l=f.hasOwnProperty;e.a=n},function(t,e,r){"use strict";var n=r(175),o=r(16),a=r(59),i=a.a&&a.a.isTypedArray,s=i?Object(o.a)(i):n.a;e.a=s},function(t,e,r){"use strict";function n(t,e){return function(r){return t(e(r))}}e.a=n},function(t,e,r){"use strict";function n(){return[]}e.a=n},function(t,e,r){"use strict";var n=r(64),o=r(65),a=r(62),i=r(94),s=Object.getOwnPropertySymbols,u=s?function(t){for(var e=[];t;)Object(n.a)(e,Object(a.a)(t)),t=Object(o.a)(t);return e}:i.a;e.a=u},function(t,e,r){"use strict";function n(t){return Object(o.a)(t,i.default,a.a)}var o=r(97),a=r(62),i=r(11);e.a=n},function(t,e,r){"use strict";function n(t,e,r){var n=e(t);return Object(a.default)(t)?n:Object(o.a)(n,r(t))}var o=r(64),a=r(1);e.a=n},function(t,e,r){"use strict";var n=r(10),o=r(4),a=Object(n.a)(o.a,"Set");e.a=a},function(t,e,r){"use strict";var n=r(10),o=r(4),a=Object(n.a)(o.a,"WeakMap");e.a=a},function(t,e,r){"use strict";var n=r(4),o=n.a.Uint8Array;e.a=o},function(t,e,r){"use strict";function n(t,e,r){return e=a(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=a(n.length-e,0),u=Array(s);++i<s;)u[i]=n[e+i];i=-1;for(var c=Array(e+1);++i<e;)c[i]=n[i];return c[e]=r(u),Object(o.a)(t,this,c)}}var o=r(68),a=Math.max;e.a=n},function(t,e,r){"use strict";function n(t){var e=0,r=0;return function(){var n=i(),s=a-(n-r);if(r=n,s>0){if(++e>=o)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var o=800,a=16,i=Date.now;e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(199),o=r(72),a=Object(o.a)(function(t,e){return null==t?{}:Object(n.a)(t,e)});e.default=a},function(t,e,r){"use strict";function n(t,e,r){for(var n=-1,s=e.length,u={};++n<s;){var c=e[n],f=Object(o.a)(t,c);r(f,c)&&Object(a.a)(u,Object(i.a)(c,t),f)}return u}var o=r(37),a=r(204),i=r(19);e.a=n},function(t,e,r){"use strict";function n(t){return null==t?"":Object(o.a)(t)}var o=r(203);e.a=n},function(t,e,r){"use strict";function n(t,e){return null!=t&&Object(a.a)(t,e,o.a)}var o=r(205),a=r(107);e.a=n},function(t,e,r){"use strict";function n(t,e,r){e=Object(o.a)(e,t);for(var n=-1,f=e.length,l=!1;++n<f;){var p=Object(c.a)(e[n]);if(!(l=null!=t&&r(t,p)))break;t=t[p]}return l||++n!=f?l:!!(f=null==t?0:t.length)&&Object(u.a)(f)&&Object(s.a)(p,f)&&(Object(i.default)(t)||Object(a.a)(t))}var o=r(19),a=r(55),i=r(1),s=r(23),u=r(58),c=r(20);e.a=n},function(t,e,r){"use strict";function n(t,e){return Object(o.a)(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(74);e.default=n},function(t,e,r){"use strict";function n(t,e,r,n,c,f){var l=r&s,p=t.length,h=e.length;if(p!=h&&!(l&&h>p))return!1;var d=f.get(t);if(d&&f.get(e))return d==e;var v=-1,b=!0,_=r&u?new o.a:void 0;for(f.set(t,e),f.set(e,t);++v<p;){var y=t[v],m=e[v];if(n)var g=l?n(m,y,v,e,t,f):n(y,m,v,t,e,f);if(void 0!==g){if(g)continue;b=!1;break}if(_){if(!Object(a.a)(e,function(t,e){if(!Object(i.a)(_,e)&&(y===t||c(y,t,r,n,f)))return _.push(e)})){b=!1;break}}else if(y!==m&&!c(y,m,r,n,f)){b=!1;break}}return f.delete(t),f.delete(e),b}var o=r(39),a=r(215),i=r(40),s=1,u=2;e.a=n},function(t,e,r){"use strict";function n(t){return void 0===t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";function n(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,r){"use strict";function n(t){return t===t&&!Object(o.a)(t)}var o=r(6);e.a=n},function(t,e,r){"use strict";function n(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}e.a=n},function(t,e,r){"use strict";function n(t){return function(e){return null==e?void 0:e[t]}}e.a=n},function(t,e,r){"use strict";function n(t,e,r){return e===e?Object(i.a)(t,e,r):Object(o.a)(t,a.a,r)}var o=r(241),a=r(242),i=r(243);e.a=n},function(t,e,r){"use strict";function n(t){return"function"==typeof t?t:o.a}var o=r(18);e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(245),o=Object(n.a)();e.default=o},function(t,e,r){"use strict";var n=r(99),o=n.a&&new n.a;e.a=o},function(t,e,r){"use strict";function n(){}e.a=n},function(t,e,r){"use strict";function n(t){for(var e=t.name+"",r=o.a[e],n=i.call(o.a,e)?r.length:0;n--;){var a=r[n],s=a.func;if(null==s||s==t)return a.name}return e}var o=r(246),a=Object.prototype,i=a.hasOwnProperty;e.a=n},function(t,e,r){"use strict";function n(t){var e=Object(i.a)(t),r=s.a[e];if("function"!=typeof r||!(e in o.a.prototype))return!1;if(t===r)return!0;var n=Object(a.a)(r);return!!n&&t===n[0]}var o=r(81),a=r(80),i=r(120),s=r(247);e.a=n},function(t,e,r){"use strict";function n(t){return"number"==typeof t||Object(a.a)(t)&&Object(o.a)(t)==i}Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),i="[object Number]";e.default=n},function(t,e,r){"use strict";function n(t,e){var r=-1,n=Object(a.a)(t)?Array(t.length):[];return Object(o.a)(t,function(t,o,a){n[++r]=e(t,o,a)}),n}var o=r(42),a=r(17);e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(9),o=r(252),a=r(82),i=r(46),s=Object(n.a)(function(t,e){var r=Object(i.a)(e,Object(a.a)(s));return Object(o.a)(t,64,void 0,e,r)});s.placeholder={},e.default=s},function(t,e,r){"use strict";var n=r(18),o=r(118),a=o.a?function(t,e){return o.a.set(t,e),t}:n.a;e.a=a},function(t,e,r){"use strict";function n(t,e,r,m,g,O,x,j,T,E){function A(){for(var h=arguments.length,d=Array(h),v=h;v--;)d[v]=arguments[v];if(S)var b=Object(c.a)(A),_=Object(i.a)(d,b);if(m&&(d=Object(o.a)(d,m,g,S)),O&&(d=Object(a.a)(d,O,x,S)),h-=_,S&&h<E){var y=Object(l.a)(d,b);return Object(u.a)(t,e,n,A.placeholder,r,d,y,j,T,E-h)}var B=M?r:this,F=C?B[t]:t;return h=d.length,j?d=Object(f.a)(d,j):R&&h>1&&d.reverse(),w&&T<h&&(d.length=T),this&&this!==p.a&&this instanceof A&&(F=P||Object(s.a)(F)),F.apply(B,d)}var w=e&_,M=e&h,C=e&d,S=e&(v|b),R=e&y,P=C?void 0:Object(s.a)(t);return A}var o=r(127),a=r(128),i=r(255),s=r(45),u=r(129),c=r(82),f=r(259),l=r(46),p=r(4),h=1,d=2,v=8,b=16,_=128,y=512;e.a=n},function(t,e,r){"use strict";function n(t,e,r,n){for(var a=-1,i=t.length,s=r.length,u=-1,c=e.length,f=o(i-s,0),l=Array(c+f),p=!n;++u<c;)l[u]=e[u];for(;++a<s;)(p||a<i)&&(l[r[a]]=t[a]);for(;f--;)l[u++]=t[a++];return l}var o=Math.max;e.a=n},function(t,e,r){"use strict";function n(t,e,r,n){for(var a=-1,i=t.length,s=-1,u=r.length,c=-1,f=e.length,l=o(i-u,0),p=Array(l+f),h=!n;++a<l;)p[a]=t[a];for(var d=a;++c<f;)p[d+c]=e[c];for(;++s<u;)(h||a<i)&&(p[d+r[s]]=t[a++]);return p}var o=Math.max;e.a=n},function(t,e,r){"use strict";function n(t,e,r,n,h,d,v,b,_,y){var m=e&f,g=m?v:void 0,O=m?void 0:v,x=m?d:void 0,j=m?void 0:d;e|=m?l:p,(e&=~(m?p:l))&c||(e&=~(s|u));var T=[t,e,h,x,g,j,O,b,_,y],E=r.apply(void 0,T);return Object(o.a)(t)&&Object(a.a)(E,T),E.placeholder=n,Object(i.a)(E,t,e)}var o=r(121),a=r(130),i=r(131),s=1,u=2,c=4,f=8,l=32,p=64;e.a=n},function(t,e,r){"use strict";var n=r(125),o=r(102),a=Object(o.a)(n.a);e.a=a},function(t,e,r){"use strict";function n(t,e,r){var n=e+"";return Object(i.a)(t,Object(a.a)(n,Object(s.a)(Object(o.a)(n),r)))}var o=r(256),a=r(257),i=r(69),s=r(258);e.a=n},function(t,e,r){"use strict";function n(t,e,r){var n=-1,l=a.a,p=t.length,h=!0,d=[],v=d;if(r)h=!1,l=i.a;else if(p>=f){var b=e?null:Object(u.a)(t);if(b)return Object(c.a)(b);h=!1,l=s.a,v=new o.a}else v=e?[]:d;t:for(;++n<p;){var _=t[n],y=e?e(_):_;if(_=r||0!==_?_:0,h&&y===y){for(var m=v.length;m--;)if(v[m]===y)continue t;e&&v.push(y),d.push(_)}else l(v,y,r)||(v!==d&&v.push(y),d.push(_))}return d}var o=r(39),a=r(43),i=r(77),s=r(40),u=r(265),c=r(75),f=200;e.a=n},function(t,e,r){"use strict";function n(t){return t&&t.length?Object(o.a)(t):[]}Object.defineProperty(e,"__esModule",{value:!0});var o=r(132);e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t,e,r){this.operator=t,this.leftOperand=e,this.rightOperand=r}return t}();e.BinaryExpr=n;var o=function(){function t(t,e){this.operator=t,this.operand=e}return t}();e.UnaryExpr=o;var a=function(){function t(t,e,r){this.funcName=t,this.args=e,this.preComputeUniformName=r}return t}();e.FuncCall=a;var i=function(){function t(t,e){this.lhs=t,this.expr=e}return t}();e.Assignment=i;var s=function(){function t(t){this.statements=t}return t}();e.Program=s;!function(t){t.ID="ID",t.CONST="CONST",t.REG="REG",t.VALUE="VALUE"}(e.PrimaryExprType||(e.PrimaryExprType={}));var u=function(){function t(t,e){this.value=t,this.type=e}return t}();e.PrimaryExpr=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(269);r.d(e,"default",function(){return n.a})},function(t,e,r){"use strict";function n(t,e,r){return t&&t.length?(e=r||void 0===e?1:Object(a.a)(e),Object(o.a)(t,0,e<0?0:e)):[]}Object.defineProperty(e,"__esModule",{value:!0});var o=r(41),a=r(21);e.default=n},function(t,e,r){"use strict";function n(t,e){if((t=Object(i.a)(t))<1||t>s)return[];var r=u,n=c(t,u);e=Object(a.a)(e),t-=u;for(var f=Object(o.a)(n,e);++r<t;)e(r);return f}Object.defineProperty(e,"__esModule",{value:!0});var o=r(54),a=r(116),i=r(21),s=9007199254740991,u=4294967295,c=Math.min;e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=r(122),o=r(73),a=r(110),i=function(){function t(t,e,r,n){void 0===r&&(r=!1),void 0===n&&(n=2),this.rctx=t,this.copier=e,this.initTexCount=n,this.hasFrameBuffer=r,this.init()}return t.prototype.addTexture=function(t){if(t&&t in this.names)return this.names[t].refCount++,this.names[t].index;var e=this.rctx.getGl(),r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.drawingBufferWidth,e.drawingBufferHeight,0,e.RGBA,e.UNSIGNED_BYTE,null),this.textures.push(r),t&&(this.names[t]={index:this.textures.length-1,refCount:1}),this.textures.length-1},t.prototype.removeTexture=function(t){if(o.default(t)&&t in this.names&&this.names[t].refCount>1)return void this.names[t].refCount--;var e=this.findIndex(t);if(e===this.curTex&&(this.oldTexture||this.oldFrameBuffer))throw new Error("Cannot remove current texture when set as render target");this.rctx.getGl().deleteTexture(this.textures[e]),this.textures.splice(e,1),this.curTex>=this.textures.length&&(this.curTex=this.textures.length-1),"string"==typeof t&&delete this.names[t]},t.prototype.setAsRenderTarget=function(t){var e=this.rctx.getGl(),r=e.getParameter(e.FRAMEBUFFER_BINDING);if(this.hasFrameBuffer)this.oldFrameBuffer=r,e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer);else{if(!r)throw new Error("Cannot set texture when current rendertarget is the default FrameBuffer");this.oldTexture=e.getFramebufferAttachmentParameter(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME)}if(this.isRenderTarget=!0,a.default(t)){var n=this.textures[this.curTex];e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}else this.switchTexture(t)},t.prototype.unsetAsRenderTarget=function(){var t=this.rctx.getGl();this.hasFrameBuffer?(t.bindFramebuffer(t.FRAMEBUFFER,this.oldFrameBuffer),this.oldFrameBuffer=null):(t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.oldTexture,0),this.oldTexture=null),this.isRenderTarget=!1},t.prototype.getCurrentTexture=function(){return this.textures[this.curTex]},t.prototype.getTexture=function(t){var e=this.findIndex(t);return this.textures[e]},t.prototype.copyOver=function(){var t=this.textures.length,e=this.textures[(t+this.curTex-1)%t];this.copier.run(null,{srcTexture:e})},t.prototype.switchTexture=function(t){if(void 0===t&&(t=(this.curTex+1)%this.textures.length),!this.isRenderTarget)throw new Error("Cannot switch texture when not set as rendertarget");var e=this.rctx.getGl();this.curTex=this.findIndex(t);var r=this.textures[this.curTex];e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)},t.prototype.resize=function(){for(var t=this.rctx.getGl(),e=0,r=this.textures;e<r.length;e++){var n=r[e];t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.drawingBufferWidth,t.drawingBufferHeight,0,t.RGBA,t.UNSIGNED_BYTE,null)}},t.prototype.destroy=function(){for(var t=this.rctx.getGl(),e=0,r=this.textures;e<r.length;e++){var n=r[e];t.deleteTexture(n)}this.hasFrameBuffer&&t.deleteFramebuffer(this.framebuffer)},t.prototype.init=function(){var t=this.rctx.getGl();this.hasFrameBuffer&&(this.framebuffer=t.createFramebuffer()),this.names={},this.textures=[];for(var e=0;e<this.initTexCount;e++)this.addTexture();this.curTex=0,this.isRenderTarget=!1},t.prototype.findIndex=function(t){var e;if(o.default(t)&&t in this.names)e=this.names[t].index;else{if(!(n.default(t)&&t>=0&&t<this.textures.length))throw console.log("arg = ",typeof t,"textures = ",this.textures),new Error("Unknown texture '"+t+"'");e=t}return e},t}();e.default=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(0),a=r(3),i=function(t){function e(e,r){return t.call(this,e,{bindings:{uniforms:{color:{name:"u_color",valueType:o.WebGLVarType._3FV}}},blendMode:r,fragmentShader:"\n                uniform vec3 u_color;\n                void main() {\n                setFragColor(vec4(u_color, 1));\n                }\n            "})||this}return n(e,t),e}(a.default);e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(){}return t}();e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=r(142),o=r(2),a=r(309),i=r(140),s=r(3),u={Main:n.default,Component:o.default,ShaderProgram:s.default,WebAudioAnalyser:a.default,AnalyserAdapter:i.default};e.default=u},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(47),a=r(24),i=r(103),s=r(207),u=r(208),c=r(209),f=r(210),l=r(274),p=r(275),h=r(76),d=r(276),v=r(278),b=r(279),_=r(280),y=r(281),m=r(282),g=r(284),O=r(286),x=r(287),j=r(297),T=r(301),E=r(302),A=r(303),w=r(304),M=r(305),C=r(306),S=r(0),R=r(307),P=r(308),B=r(138),F=function(t){function e(e){var r=t.call(this)||this;if(r.presetResourceKeys=[],S.checkRequiredOptions(e,["canvas","analyser"]),e=a.default(e,{showStat:!1}),r.canvas=e.canvas,r.analyser=e.analyser,r.isStarted=!1,e.requestAnimationFrame&&e.cancelAnimationFrame?(r.requestAnimationFrame=e.requestAnimationFrame,r.cancelAnimationFrame=e.cancelAnimationFrame):(r.requestAnimationFrame=window.requestAnimationFrame.bind(window),r.cancelAnimationFrame=window.cancelAnimationFrame.bind(window)),e.showStat){var n=new s.default;n.setMode(0),n.domElement.style.position="absolute",n.domElement.style.right="5px",n.domElement.style.bottom="5px",document.body.appendChild(n.domElement),r.stats=n}return r.meta={},r._initComponentRegistry(),r._initResourceManager(e.resourcePrefix||""),r._registerContextEvents(),r._initGl(),r._setupRoot({id:"root"}),r}return n(e,t),e.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.rsrcMan.ready&&this._startAnimation())},e.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.rsrcMan.ready&&this._stopAnimation())},e.prototype.loadPreset=function(t){t=o.default(t),t.id="root",this.rootComponent.destroy(),this.rsrcMan.clear(this.presetResourceKeys),"resources"in t&&"uris"in t.resources?(this.rsrcMan.registerUri(t.resources.uris),this.presetResourceKeys=Object.keys(t.resources.uris)):this.presetResourceKeys=[],this.meta=o.default(t.meta),this._setupRoot(t)},e.prototype.resetCanvas=function(){var t=this.rootComponent.toJSON();this.rootComponent.destroy(),this.tempTSM.destroy(),this._initGl(),this._setupRoot(t)},e.prototype.notifyResize=function(){var t=this.rctx.getGl();t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),this.tempTSM.resize(),this.emit("resize",t.drawingBufferWidth,t.drawingBufferHeight)},e.prototype.cacheBuffer=function(t,e){this.buffers[t]=e},e.prototype.getBuffer=function(t){return this.buffers[t]},e.prototype.get=function(t){if("meta"===t)return this.meta},e.prototype.toJSON=function(){var t=this.rootComponent.toJSON();return t=i.default(t,"clearFrame","components"),t.resources=this.rsrcMan.toJSON(),t.meta=o.default(this.meta),t},e.prototype.destroy=function(){if(this.stop(),this.rootComponent.destroy(),this.rootComponent=null,this.stats){var t=this.stats.domElement;t.parentNode.removeChild(t),this.stats=null}this.rsrcMan=null,this.stopListening(),this.canvas.removeEventListener("webglcontextlost",this.contextLostHander),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHander)},e.prototype.getRctx=function(){return this.rctx},e.prototype.getRsrcMan=function(){return this.rsrcMan},e.prototype.getCopier=function(){return this.copier},e.prototype.getAnalyser=function(){return this.analyser},e.prototype.getComponentRegistry=function(){return this.componentRegistry},e.prototype.getTempTSM=function(){return this.tempTSM},e.prototype.getRegisterBank=function(){return this.registerBank},e.prototype.getBootTime=function(){return this.bootTime},e.prototype.setAttribute=function(t,e,r){return"meta"===t&&(this.meta=e,!0)},e.prototype.handleRsrcWait=function(){this.isStarted&&this._stopAnimation()},e.prototype.handleRsrcReady=function(){this.isStarted&&this._startAnimation()},e.prototype._initComponentRegistry=function(){this.componentRegistry=new c.default([f.default,d.default,v.default,b.default,_.default,y.default,g.default,O.default,x.default,j.default,T.default,E.default,A.default,w.default,M.default,C.default,l.default,p.default])},e.prototype._initResourceManager=function(t){var e=u.default;t&&(e=o.default(e),e.prefix=t),this.rsrcMan=new m.default(e),this.listenTo(this.rsrcMan,"wait",this.handleRsrcWait.bind(this)),this.listenTo(this.rsrcMan,"ready",this.handleRsrcReady.bind(this))},e.prototype._registerContextEvents=function(){var t=this;this.contextLostHander=function(e){e.preventDefault(),t.stop()},this.canvas.addEventListener("webglcontextlost",this.contextLostHander),this.contextRestoredHander=function(e){t.resetCanvas()},this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHander)},e.prototype._initGl=function(){try{this.rctx=new P.default(this.canvas.getContext("webgl",{alpha:!1})),this.copier=new R.default(this.rctx,!0),this.tempTSM=new B.default(this.rctx,this.copier,!0,0)}catch(t){throw new Error("Couldnt get webgl context"+t)}},e.prototype._setupRoot=function(t){this.registerBank={},this.bootTime=(new Date).getTime(),this.rootComponent=new f.default(this,null,t)},e.prototype._startAnimation=function(){var t=this,e=function(){t.analyser.update(),t.rootComponent.draw(),t.animReqId=t.requestAnimationFrame(e)};if(this.stats){var r=e;e=function(){t.stats.begin(),r(),t.stats.end()}}this.animReqId=this.requestAnimationFrame(e)},e.prototype._stopAnimation=function(){this.cancelAnimationFrame(this.animReqId)},e.version="2.0.1",e}(h.default);e.default=F},function(t,e,r){"use strict";function n(){this.__data__=[],this.size=0}e.a=n},function(t,e,r){"use strict";function n(t){var e=this.__data__,r=Object(o.a)(e,t);return!(r<0)&&(r==e.length-1?e.pop():i.call(e,r,1),--this.size,!0)}var o=r(31),a=Array.prototype,i=a.splice;e.a=n},function(t,e,r){"use strict";function n(t){var e=this.__data__,r=Object(o.a)(e,t);return r<0?void 0:e[r][1]}var o=r(31);e.a=n},function(t,e,r){"use strict";function n(t){return Object(o.a)(this.__data__,t)>-1}var o=r(31);e.a=n},function(t,e,r){"use strict";function n(t,e){var r=this.__data__,n=Object(o.a)(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var o=r(31);e.a=n},function(t,e,r){"use strict";function n(){this.__data__=new o.a,this.size=0}var o=r(30);e.a=n},function(t,e,r){"use strict";function n(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}e.a=n},function(t,e,r){"use strict";function n(t){return this.__data__.get(t)}e.a=n},function(t,e,r){"use strict";function n(t){return this.__data__.has(t)}e.a=n},function(t,e,r){"use strict";function n(t,e){var r=this.__data__;if(r instanceof o.a){var n=r.__data__;if(!a.a||n.length<s-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new i.a(n)}return r.set(t,e),this.size=r.size,this}var o=r(30),a=r(49),i=r(51),s=200;e.a=n},function(t,e,r){"use strict";function n(t){return!(!Object(i.a)(t)||Object(a.a)(t))&&(Object(o.default)(t)?d:c).test(Object(s.a)(t))}var o=r(50),a=r(157),i=r(6),s=r(88),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,f=Function.prototype,l=Object.prototype,p=f.toString,h=l.hasOwnProperty,d=RegExp("^"+p.call(h).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.a=n},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function n(t){var e=i.call(t,u),r=t[u];try{t[u]=void 0;var n=!0}catch(t){}var o=s.call(t);return n&&(e?t[u]=r:delete t[u]),o}var o=r(14),a=Object.prototype,i=a.hasOwnProperty,s=a.toString,u=o.a?o.a.toStringTag:void 0;e.a=n},function(t,e,r){"use strict";function n(t){return a.call(t)}var o=Object.prototype,a=o.toString;e.a=n},function(t,e,r){"use strict";function n(t){return!!a&&a in t}var o=r(158),a=function(){var t=/[^.]+$/.exec(o.a&&o.a.keys&&o.a.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();e.a=n},function(t,e,r){"use strict";var n=r(4),o=n.a["__core-js_shared__"];e.a=o},function(t,e,r){"use strict";function n(t,e){return null==t?void 0:t[e]}e.a=n},function(t,e,r){"use strict";function n(){this.size=0,this.__data__={hash:new o.a,map:new(i.a||a.a),string:new o.a}}var o=r(161),a=r(30),i=r(49);e.a=n},function(t,e,r){"use strict";function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var o=r(162),a=r(163),i=r(164),s=r(165),u=r(166);n.prototype.clear=o.a,n.prototype.delete=a.a,n.prototype.get=i.a,n.prototype.has=s.a,n.prototype.set=u.a,e.a=n},function(t,e,r){"use strict";function n(){this.__data__=o.a?Object(o.a)(null):{},this.size=0}var o=r(32);e.a=n},function(t,e,r){"use strict";function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}e.a=n},function(t,e,r){"use strict";function n(t){var e=this.__data__;if(o.a){var r=e[t];return r===a?void 0:r}return s.call(e,t)?e[t]:void 0}var o=r(32),a="__lodash_hash_undefined__",i=Object.prototype,s=i.hasOwnProperty;e.a=n},function(t,e,r){"use strict";function n(t){var e=this.__data__;return o.a?void 0!==e[t]:i.call(e,t)}var o=r(32),a=Object.prototype,i=a.hasOwnProperty;e.a=n},function(t,e,r){"use strict";function n(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=o.a&&void 0===e?a:e,this}var o=r(32),a="__lodash_hash_undefined__";e.a=n},function(t,e,r){"use strict";function n(t){var e=Object(o.a)(this,t).delete(t);return this.size-=e?1:0,e}var o=r(33);e.a=n},function(t,e,r){"use strict";function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}e.a=n},function(t,e,r){"use strict";function n(t){return Object(o.a)(this,t).get(t)}var o=r(33);e.a=n},function(t,e,r){"use strict";function n(t){return Object(o.a)(this,t).has(t)}var o=r(33);e.a=n},function(t,e,r){"use strict";function n(t,e){var r=Object(o.a)(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var o=r(33);e.a=n},function(t,e,r){"use strict";function n(t,e){return t&&Object(o.a)(e,Object(a.default)(e),t)}var o=r(15),a=r(11);e.a=n},function(t,e,r){"use strict";function n(t){return Object(a.a)(t)&&Object(o.a)(t)==i}var o=r(8),a=r(5),i="[object Arguments]";e.a=n},function(t,e,r){"use strict";function n(){return!1}e.a=n},function(t,e,r){"use strict";function n(t){return Object(i.a)(t)&&Object(a.a)(t.length)&&!!s[Object(o.a)(t)]}var o=r(8),a=r(58),i=r(5),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.a=n},function(t,e,r){"use strict";function n(t){if(!Object(o.a)(t))return Object(a.a)(t);var e=[];for(var r in Object(t))s.call(t,r)&&"constructor"!=r&&e.push(r);return e}var o=r(60),a=r(177),i=Object.prototype,s=i.hasOwnProperty;e.a=n},function(t,e,r){"use strict";var n=r(93),o=Object(n.a)(Object.keys,Object);e.a=o},function(t,e,r){"use strict";function n(t,e){return t&&Object(o.a)(e,Object(a.a)(e),t)}var o=r(15),a=r(34);e.a=n},function(t,e,r){"use strict";function n(t){if(!Object(o.a)(t))return Object(i.a)(t);var e=Object(a.a)(t),r=[];for(var n in t)("constructor"!=n||!e&&u.call(t,n))&&r.push(n);return r}var o=r(6),a=r(60),i=r(180),s=Object.prototype,u=s.hasOwnProperty;e.a=n},function(t,e,r){"use strict";function n(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}e.a=n},function(t,e,r){"use strict";(function(t){function n(t,e){if(e)return t.slice();var r=t.length,n=c?c(r):new t.constructor(r);return t.copy(n),n}var o=r(4),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===a,u=s?o.a.Buffer:void 0,c=u?u.allocUnsafe:void 0;e.a=n}).call(e,r(57)(t))},function(t,e,r){"use strict";function n(t,e){return Object(o.a)(t,Object(a.a)(t),e)}var o=r(15),a=r(62);e.a=n},function(t,e,r){"use strict";function n(t,e){return Object(o.a)(t,Object(a.a)(t),e)}var o=r(15),a=r(95);e.a=n},function(t,e,r){"use strict";var n=r(10),o=r(4),a=Object(n.a)(o.a,"DataView");e.a=a},function(t,e,r){"use strict";var n=r(10),o=r(4),a=Object(n.a)(o.a,"Promise");e.a=a},function(t,e,r){"use strict";function n(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&a.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var o=Object.prototype,a=o.hasOwnProperty;e.a=n},function(t,e,r){"use strict";function n(t,e,r){var n=t.constructor;switch(e){case _:return Object(o.a)(t);case c:case f:return new n(+t);case y:return Object(a.a)(t,r);case m:case g:case O:case x:case j:case T:case E:case A:case w:return Object(u.a)(t,r);case l:return new n;case p:case v:return new n(t);case h:return Object(i.a)(t);case d:return new n;case b:return Object(s.a)(t)}}var o=r(67),a=r(188),i=r(189),s=r(190),u=r(191),c="[object Boolean]",f="[object Date]",l="[object Map]",p="[object Number]",h="[object RegExp]",d="[object Set]",v="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",y="[object DataView]",m="[object Float32Array]",g="[object Float64Array]",O="[object Int8Array]",x="[object Int16Array]",j="[object Int32Array]",T="[object Uint8Array]",E="[object Uint8ClampedArray]",A="[object Uint16Array]",w="[object Uint32Array]";e.a=n},function(t,e,r){"use strict";function n(t,e){var r=e?Object(o.a)(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var o=r(67);e.a=n},function(t,e,r){"use strict";function n(t){var e=new t.constructor(t.source,o.exec(t));return e.lastIndex=t.lastIndex,e}var o=/\w*$/;e.a=n},function(t,e,r){"use strict";function n(t){return i?Object(i.call(t)):{}}var o=r(14),a=o.a?o.a.prototype:void 0,i=a?a.valueOf:void 0;e.a=n},function(t,e,r){"use strict";function n(t,e){var r=e?Object(o.a)(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var o=r(67);e.a=n},function(t,e,r){"use strict";function n(t){return"function"!=typeof t.constructor||Object(i.a)(t)?{}:Object(o.a)(Object(a.a)(t))}var o=r(36),a=r(65),i=r(60);e.a=n},function(t,e,r){"use strict";var n=r(194),o=r(16),a=r(59),i=a.a&&a.a.isMap,s=i?Object(o.a)(i):n.a;e.a=s},function(t,e,r){"use strict";function n(t){return Object(a.a)(t)&&Object(o.a)(t)==i}var o=r(35),a=r(5),i="[object Map]";e.a=n},function(t,e,r){"use strict";var n=r(196),o=r(16),a=r(59),i=a.a&&a.a.isSet,s=i?Object(o.a)(i):n.a;e.a=s},function(t,e,r){"use strict";function n(t){return Object(a.a)(t)&&Object(o.a)(t)==i}var o=r(35),a=r(5),i="[object Set]";e.a=n},function(t,e,r){"use strict";var n=r(198),o=r(90),a=r(18),i=o.a?function(t,e){return Object(o.a)(t,"toString",{configurable:!0,enumerable:!1,value:Object(n.a)(e),writable:!0})}:a.a;e.a=i},function(t,e,r){"use strict";function n(t){return function(){return t}}e.a=n},function(t,e,r){"use strict";function n(t,e){return Object(o.a)(t,e,function(e,r){return Object(a.a)(t,r)})}var o=r(104),a=r(106);e.a=n},function(t,e,r){"use strict";var n=r(201),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=Object(n.a)(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,function(t,r,n,o){e.push(n?o.replace(a,"$1"):r||t)}),e});e.a=i},function(t,e,r){"use strict";function n(t){var e=Object(o.a)(t,function(t){return r.size===a&&r.clear(),t}),r=e.cache;return e}var o=r(202),a=500;e.a=n},function(t,e,r){"use strict";function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(a);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=t.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(n.Cache||o.a),r}var o=r(51),a="Expected a function";n.Cache=o.a,e.a=n},function(t,e,r){"use strict";function n(t){if("string"==typeof t)return t;if(Object(i.default)(t))return Object(a.a)(t,n)+"";if(Object(s.a)(t))return f?f.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var o=r(14),a=r(7),i=r(1),s=r(25),u=1/0,c=o.a?o.a.prototype:void 0,f=c?c.toString:void 0;e.a=n},function(t,e,r){"use strict";function n(t,e,r,n){if(!Object(s.a)(t))return t;e=Object(a.a)(e,t);for(var c=-1,f=e.length,l=f-1,p=t;null!=p&&++c<f;){var h=Object(u.a)(e[c]),d=r;if(c!=l){var v=p[h];d=n?n(v,h,p):void 0,void 0===d&&(d=Object(s.a)(v)?v:Object(i.a)(e[c+1])?[]:{})}Object(o.a)(p,h,d),p=p[h]}return t}var o=r(53),a=r(19),i=r(23),s=r(6),u=r(20);e.a=n},function(t,e,r){"use strict";function n(t,e){return null!=t&&e in Object(t)}e.a=n},function(t,e,r){"use strict";function n(t){return Object(i.default)(t)||Object(a.a)(t)||!!(s&&t&&t[s])}var o=r(14),a=r(55),i=r(1),s=o.a?o.a.isConcatSpreadable:void 0;e.a=n},function(t,e,r){!function(e,r){t.exports=r()}(0,function(){var t=function(){function e(t){return o.appendChild(t.dom),t}function r(t){for(var e=0;e<o.children.length;e++)o.children[e].style.display=e===t?"block":"none";n=t}var n=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(t){t.preventDefault(),r(++n%o.children.length)},!1);var a=(performance||Date).now(),i=a,s=0,u=e(new t.Panel("FPS","#0ff","#002")),c=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var f=e(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:e,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){s++;var t=(performance||Date).now();if(c.update(t-a,200),t>i+1e3&&(u.update(1e3*s/(t-i),100),i=t,s=0,f)){var e=performance.memory;f.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){a=this.end()},domElement:o,setMode:r}};return t.Panel=function(t,e,r){var n=1/0,o=0,a=Math.round,i=a(window.devicePixelRatio||1),s=80*i,u=48*i,c=3*i,f=2*i,l=3*i,p=15*i,h=74*i,d=30*i,v=document.createElement("canvas");v.width=s,v.height=u,v.style.cssText="width:80px;height:48px";var b=v.getContext("2d");return b.font="bold "+9*i+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=r,b.fillRect(0,0,s,u),b.fillStyle=e,b.fillText(t,c,f),b.fillRect(l,p,h,d),b.fillStyle=r,b.globalAlpha=.9,b.fillRect(l,p,h,d),{dom:v,update:function(u,_){n=Math.min(n,u),o=Math.max(o,u),b.fillStyle=r,b.globalAlpha=1,b.fillRect(0,0,s,p),b.fillStyle=e,b.fillText(a(u)+" "+t+" ("+a(n)+"-"+a(o)+")",c,f),b.drawImage(v,l+i,p,h-i,d,l,p,h-i,d),b.fillRect(l+h-i,p,i,d),b.fillStyle=r,b.globalAlpha=.9,b.fillRect(l+h-i,p,i,a((1-u/_)*d))}}},t})},function(t,e,r){"use strict";e.__esModule=!0;var n={fileNames:["avsres_texer_circle_edgeonly_19x19.bmp","avsres_texer_circle_edgeonly_29x29.bmp","avsres_texer_circle_fade_13x13.bmp","avsres_texer_circle_heavyblur_19x19.bmp","avsres_texer_circle_heavyblur_21x21.bmp","avsres_texer_circle_heavyblur_29x29.bmp","avsres_texer_circle_sharp_09x09.bmp","avsres_texer_circle_sharp_19x19.bmp","avsres_texer_circle_slightblur_13x13.bmp","avsres_texer_circle_slightblur_21x21.bmp","avsres_texer_hexagon-h_blur_123x123.bmp","avsres_texer_square_edgeonly_24x24.bmp","avsres_texer_square_edgeonly_28x28.bmp","avsres_texer_square_edgeonly_30x30.bmp","avsres_texer_square_sharp_20x20.bmp","avsres_texer_square_sharp_32x32.bmp","avsres_texer_square_sharp_48x48.bmp","avsres_texer_square_sharp_60x60.bmp","avsres_texer_square_sharp_64x64.bmp","avsres_texer_square_sharp_72x72.bmp","avsres_texer_square_sharp_96x96.bmp","avsres_texer_square_sharp_250x250.bmp"],name:"Builtin",prefix:"https://unpkg.com/webvs@2.0.1/resources/"};e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t){this.components={},this.tags=[],t&&this.addComponent(t)}return t.prototype.addComponent=function(t){var e=this;Array.isArray(t)||(t=[t]),t.forEach(function(t){var r=t.getComponentName();if(r in e.components)throw new Error("Component "+r+" already exists in the registry");e.components[r]=t,-1===e.tags.indexOf(t.getComponentTag())&&e.tags.push(t.getComponentTag())})},t.prototype.getComponentClass=function(t){return this.components[t]},t.prototype.getComponentClassesByTag=function(t){var e=this;return Object.keys(this.components).map(function(t){return e.components[t]}).filter(function(e){return e.getComponentTag()===t})},t}();e.default=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o,a=r(211),i=r(28),s=r(138);!function(t){t[t.REPLACE=1]="REPLACE",t[t.MAXIMUM=2]="MAXIMUM",t[t.AVERAGE=3]="AVERAGE",t[t.ADDITIVE=4]="ADDITIVE",t[t.SUBTRACTIVE1=5]="SUBTRACTIVE1",t[t.SUBTRACTIVE2=6]="SUBTRACTIVE2",t[t.MULTIPLY=7]="MULTIPLY",t[t.MULTIPLY2=8]="MULTIPLY2",t[t.ADJUSTABLE=9]="ADJUSTABLE",t[t.ALPHA=10]="ALPHA",t[t.IGNORE=11]="IGNORE"}(o=e.ELBlendMode||(e.ELBlendMode={}));var u=function(t){function e(e,r,n){var o=t.call(this,e,r,n)||this;return o.inited=!1,o}return n(e,t),e.prototype.init=function(){t.prototype.init.call(this);var e=new s.default(this.main.getRctx(),this.main.getCopier(),!this.parent);this.setTSM(e),this.updateCode(),this.updateBlendMode(this.opts.input,"input"),this.updateBlendMode(this.opts.output,"output"),this.frameCounter=0,this.first=!0,this.listenTo(this.main,"resize",this.handleResize)},e.prototype.draw=function(){var t=this.opts;if((!t.enableOnBeat||(this.main.getAnalyser().isBeat()?this.frameCounter=t.enableOnBeatFor:this.frameCounter>0&&this.frameCounter--,0!==this.frameCounter))&&(this.code.beat=this.main.getAnalyser().isBeat()?1:0,this.code.enabled=1,this.code.clear=t.clearFrame?1:0,this.inited||(this.inited=!0,this.code.init()),this.code.perFrame(),0!==this.code.enabled)){if(this.getTSM().setAsRenderTarget(),t.clearFrame||this.first||this.code.clear){var e=this.main.getRctx().getGl();e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),this.first=!1}if(this.input!==o.IGNORE){var r=this.parent.getTSM().getCurrentTexture();this.main.getCopier().run(this.getTSM(),{srcTexture:r},this.input)}for(var n=0,a=this.components;n<a.length;n++){var i=a[n];i.isEnabled()&&i.draw()}this.getTSM().unsetAsRenderTarget(),this.output!==o.IGNORE&&(this.parent?this.main.getCopier().run(this.parent.getTSM(),{srcTexture:this.getTSM().getCurrentTexture()},this.output):this.main.getCopier().run(null,{srcTexture:this.getTSM().getCurrentTexture()}))}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.getTSM()&&this.getTSM().destroy()},e.prototype.updateCode=function(){this.code=i.default(this.opts.code,["init","perFrame"]).codeInst,this.code.setup(this.main),this.inited=!1},e.prototype.updateBlendMode=function(t,e){"input"===e?this.input=o[t]:this.output=o[t]},e.prototype.handleResize=function(){this.getTSM().resize(),this.code.updateDimVars(this.main.getRctx().getGl())},e.componentName="EffectList",e.componentTag="",e.defaultOptions={clearFrame:!1,code:{init:"",perFrame:""},enableOnBeat:!1,enableOnBeatFor:1,input:"IGNORE",output:"REPLACE"},e.optUpdateHandlers={code:"updateCode",input:"updateBlendMode",output:"updateBlendMode"},e}(a.default);e.default=u},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(24),a=r(73),i=r(2),s=function(t){function e(e,r,n){var o=t.call(this,e,r,n)||this;return delete o.opts.components,o}return n(e,t),e.prototype.getTSM=function(){return this.tsm},e.prototype.init=function(){var t=[];if(this.opts.components)for(var e=0,r=this.opts.components;e<r.length;e++){var n=r[e],o=this.main.getComponentRegistry().getComponentClass(n.type);if(o){var a=new o(this.main,this,n);t.push(a)}else console.warn("Unknown ComponentClass: "+n.type+". Skipping.")}this.components=t,this.tsm=this.parent&&this.parent.getTSM()},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0,r=this.components;e<r.length;e++){r[e].destroy()}},e.prototype.addComponent=function(t,e,r){void 0===e&&(e=this.components.length),void 0===r&&(r={});var n;if(t instanceof i.default)n=t,n.setParent(this);else{var a=this.main.getComponentRegistry().getComponentClass(t.type);if(!a)return console.warn("Unknown ComponentClass: "+t.type+"."),null;n=new a(this.main,this,t)}return this.components.splice(e,0,n),r=o.default({pos:e},r),this.emit("addComponent",n,this,r),n},e.prototype.detachComponent=function(t,e){if(void 0===e&&(e={}),a.default(t)){var r=t,n=void 0;for(n=0;n<this.components.length;n++)if(this.components[n].getId()===r){t=n;break}if(n===this.components.length)return}var i=this.components[t];return this.components.splice(t,1),e=o.default({pos:t},e),this.emit("detachComponent",i,this,e),i},e.prototype.findComponent=function(t){for(var r=0,n=this.components;r<n.length;r++){var o=n[r];if(o.getId()===t)return o}for(var a=0,i=this.components;a<i.length;a++){var s=i[a];if(s instanceof e){var u=s.findComponent(t);if(u)return u}}},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);e.components=[];for(var r=0,n=this.components;r<n.length;r++){var o=n[r];e.components.push(o.toJSON())}return e},e.prototype.setTSM=function(t){this.tsm=t},e}(i.default);e.default=s},function(t,e,r){"use strict";function n(t,e,r,n,b,y){var m=Object(c.default)(t),g=Object(c.default)(e),O=m?d:Object(u.a)(t),x=g?d:Object(u.a)(e);O=O==h?v:O,x=x==h?v:x;var j=O==v,T=x==v,E=O==x;if(E&&Object(f.a)(t)){if(!Object(f.a)(e))return!1;m=!0,j=!1}if(E&&!j)return y||(y=new o.a),m||Object(l.a)(t)?Object(a.a)(t,e,r,n,b,y):Object(i.a)(t,e,O,r,n,b,y);if(!(r&p)){var A=j&&_.call(t,"__wrapped__"),w=T&&_.call(e,"__wrapped__");if(A||w){var M=A?t.value():t,C=w?e.value():e;return y||(y=new o.a),b(M,C,r,n,y)}}return!!E&&(y||(y=new o.a),Object(s.a)(t,e,r,n,b,y))}var o=r(48),a=r(109),i=r(216),s=r(218),u=r(35),c=r(1),f=r(56),l=r(92),p=1,h="[object Arguments]",d="[object Array]",v="[object Object]",b=Object.prototype,_=b.hasOwnProperty;e.a=n},function(t,e,r){"use strict";function n(t){return this.__data__.set(t,o),this}var o="__lodash_hash_undefined__";e.a=n},function(t,e,r){"use strict";function n(t){return this.__data__.has(t)}e.a=n},function(t,e,r){"use strict";function n(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}e.a=n},function(t,e,r){"use strict";function n(t,e,r,n,o,j,E){switch(r){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case O:return!(t.byteLength!=e.byteLength||!j(new a.a(t),new a.a(e)));case p:case h:case b:return Object(i.a)(+t,+e);case d:return t.name==e.name&&t.message==e.message;case _:case m:return t==e+"";case v:var A=u.a;case y:var w=n&f;if(A||(A=c.a),t.size!=e.size&&!w)return!1;var M=E.get(t);if(M)return M==e;n|=l,E.set(t,e);var C=Object(s.a)(A(t),A(e),n,o,j,E);return E.delete(t),C;case g:if(T)return T.call(t)==T.call(e)}return!1}var o=r(14),a=r(100),i=r(22),s=r(109),u=r(217),c=r(75),f=1,l=2,p="[object Boolean]",h="[object Date]",d="[object Error]",v="[object Map]",b="[object Number]",_="[object RegExp]",y="[object Set]",m="[object String]",g="[object Symbol]",O="[object ArrayBuffer]",x="[object DataView]",j=o.a?o.a.prototype:void 0,T=j?j.valueOf:void 0;e.a=n},function(t,e,r){"use strict";function n(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}e.a=n},function(t,e,r){"use strict";function n(t,e,r,n,i,u){var c=r&a,f=Object(o.a)(t),l=f.length;if(l!=Object(o.a)(e).length&&!c)return!1;for(var p=l;p--;){var h=f[p];if(!(c?h in e:s.call(e,h)))return!1}var d=u.get(t);if(d&&u.get(e))return d==e;var v=!0;u.set(t,e),u.set(e,t);for(var b=c;++p<l;){h=f[p];var _=t[h],y=e[h];if(n)var m=c?n(y,_,h,e,t,u):n(_,y,h,t,e,u);if(!(void 0===m?_===y||i(_,y,r,n,u):m)){v=!1;break}b||(b="constructor"==h)}if(v&&!b){var g=t.constructor,O=e.constructor;g!=O&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof O&&O instanceof O)&&(v=!1)}return u.delete(t),u.delete(e),v}var o=r(96),a=1,i=Object.prototype,s=i.hasOwnProperty;e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7),o=r(86),a=r(220),i=r(19),s=r(15),u=r(222),c=r(72),f=r(66),l=Object(c.a)(function(t,e){var r={};if(null==t)return r;var c=!1;e=Object(n.a)(e,function(e){return e=Object(i.a)(e,t),c||(c=e.length>1),e}),Object(s.a)(t,Object(f.a)(t),r),c&&(r=Object(o.a)(r,7,u.a));for(var l=e.length;l--;)Object(a.a)(r,e[l]);return r});e.default=l},function(t,e,r){"use strict";function n(t,e){return e=Object(o.a)(e,t),null==(t=Object(i.a)(t,e))||delete t[Object(s.a)(Object(a.default)(e))]}var o=r(19),a=r(111),i=r(221),s=r(20);e.a=n},function(t,e,r){"use strict";function n(t,e){return e.length<2?t:Object(o.a)(t,Object(a.a)(e,0,-1))}var o=r(37),a=r(41);e.a=n},function(t,e,r){"use strict";function n(t){return Object(o.a)(t)?void 0:t}var o=r(223);e.a=n},function(t,e,r){"use strict";function n(t){if(!Object(i.a)(t)||Object(o.a)(t)!=s)return!1;var e=Object(a.a)(t);if(null===e)return!0;var r=l.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&f.call(r)==p}var o=r(8),a=r(65),i=r(5),s="[object Object]",u=Function.prototype,c=Object.prototype,f=u.toString,l=c.hasOwnProperty,p=f.call(Object);e.a=n},function(t,e,r){"use strict";function n(t){var e=++a;return Object(o.a)(t)+e}Object.defineProperty(e,"__esModule",{value:!0});var o=r(105),a=0;e.default=n},function(t,e,r){"use strict";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,n,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var i=new o(r,n||t,a),s=c?c+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],i]:t._events[s].push(i):(t._events[s]=i,t._eventsCount++),t}function i(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function s(){this._events=new n,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,c="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(c=!1)),s.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)u.call(t,e)&&r.push(c?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},s.prototype.listeners=function(t){var e=c?c+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},s.prototype.listenerCount=function(t){var e=c?c+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,n,o,a){var i=c?c+t:t;if(!this._events[i])return!1;var s,u,f=this._events[i],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,r),!0;case 4:return f.fn.call(f.context,e,r,n),!0;case 5:return f.fn.call(f.context,e,r,n,o),!0;case 6:return f.fn.call(f.context,e,r,n,o,a),!0}for(u=1,s=new Array(l-1);u<l;u++)s[u-1]=arguments[u];f.fn.apply(f.context,s)}else{var p,h=f.length;for(u=0;u<h;u++)switch(f[u].once&&this.removeListener(t,f[u].fn,void 0,!0),l){case 1:f[u].fn.call(f[u].context);break;case 2:f[u].fn.call(f[u].context,e);break;case 3:f[u].fn.call(f[u].context,e,r);break;case 4:f[u].fn.call(f[u].context,e,r,n);break;default:if(!s)for(p=1,s=new Array(l-1);p<l;p++)s[p-1]=arguments[p];f[u].fn.apply(f[u].context,s)}}return!0},s.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},s.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},s.prototype.removeListener=function(t,e,r,n){var o=c?c+t:t;if(!this._events[o])return this;if(!e)return i(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||i(this,o);else{for(var s=0,u=[],f=a.length;s<f;s++)(a[s].fn!==e||n&&!a[s].once||r&&a[s].context!==r)&&u.push(a[s]);u.length?this._events[o]=1===u.length?u[0]:u:i(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=c?c+t:t,this._events[e]&&i(this,e)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=c,s.EventEmitter=s,t.exports=s},function(t,e,r){"use strict";function n(t,e){return(Object(s.default)(t)?o.a:a.a)(t,Object(i.a)(e,3))}Object.defineProperty(e,"__esModule",{value:!0});var o=r(63),a=r(227),i=r(27),s=r(1);e.default=n},function(t,e,r){"use strict";function n(t,e){var r=[];return Object(o.a)(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r}var o=r(42);e.a=n},function(t,e,r){"use strict";function n(t,e){return t&&Object(o.a)(t,e,a.default)}var o=r(229),a=r(11);e.a=n},function(t,e,r){"use strict";var n=r(230),o=Object(n.a)();e.a=o},function(t,e,r){"use strict";function n(t){return function(e,r,n){for(var o=-1,a=Object(e),i=n(e),s=i.length;s--;){var u=i[t?s:++o];if(!1===r(a[u],u,a))break}return e}}e.a=n},function(t,e,r){"use strict";function n(t,e){return function(r,n){if(null==r)return r;if(!Object(o.a)(r))return t(r,n);for(var a=r.length,i=e?a:-1,s=Object(r);(e?i--:++i<a)&&!1!==n(s[i],i,s););return r}}var o=r(17);e.a=n},function(t,e,r){"use strict";function n(t){var e=Object(a.a)(t);return 1==e.length&&e[0][2]?Object(i.a)(e[0][0],e[0][1]):function(r){return r===t||Object(o.a)(r,t,e)}}var o=r(233),a=r(234),i=r(113);e.a=n},function(t,e,r){"use strict";function n(t,e,r,n){var u=r.length,c=u,f=!n;if(null==t)return!c;for(t=Object(t);u--;){var l=r[u];if(f&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++u<c;){l=r[u];var p=l[0],h=t[p],d=l[1];if(f&&l[2]){if(void 0===h&&!(p in t))return!1}else{var v=new o.a;if(n)var b=n(h,d,p,t,e,v);if(!(void 0===b?Object(a.a)(d,h,i|s,n,v):b))return!1}}return!0}var o=r(48),a=r(74),i=1,s=2;e.a=n},function(t,e,r){"use strict";function n(t){for(var e=Object(a.default)(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Object(o.a)(i)]}return e}var o=r(112),a=r(11);e.a=n},function(t,e,r){"use strict";function n(t,e){return Object(s.a)(t)&&Object(u.a)(e)?Object(c.a)(Object(f.a)(t),e):function(r){var n=Object(a.a)(r,t);return void 0===n&&n===e?Object(i.a)(r,t):Object(o.a)(e,n,l|p)}}var o=r(74),a=r(236),i=r(106),s=r(71),u=r(112),c=r(113),f=r(20),l=1,p=2;e.a=n},function(t,e,r){"use strict";function n(t,e,r){var n=null==t?void 0:Object(o.a)(t,e);return void 0===n?r:n}var o=r(37);e.a=n},function(t,e,r){"use strict";function n(t){return Object(i.a)(t)?Object(o.a)(Object(s.a)(t)):Object(a.a)(t)}var o=r(114),a=r(238),i=r(71),s=r(20);e.a=n},function(t,e,r){"use strict";function n(t){return function(e){return Object(o.a)(e,t)}}var o=r(37);e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(240),o=r(26),a=r(9),i=r(44),s=Object(a.a)(function(t,e){return Object(i.a)(t)?Object(n.a)(t,Object(o.a)(e,1,i.a,!0)):[]});e.default=s},function(t,e,r){"use strict";function n(t,e,r,n){var l=-1,p=a.a,h=!0,d=t.length,v=[],b=e.length;if(!d)return v;r&&(e=Object(s.a)(e,Object(u.a)(r))),n?(p=i.a,h=!1):e.length>=f&&(p=c.a,h=!1,e=new o.a(e));t:for(;++l<d;){var _=t[l],y=null==r?_:r(_);if(_=n||0!==_?_:0,h&&y===y){for(var m=b;m--;)if(e[m]===y)continue t;v.push(_)}else p(e,y,n)||v.push(_)}return v}var o=r(39),a=r(43),i=r(77),s=r(7),u=r(16),c=r(40),f=200;e.a=n},function(t,e,r){"use strict";function n(t,e,r,n){for(var o=t.length,a=r+(n?1:-1);n?a--:++a<o;)if(e(t[a],a,t))return a;return-1}e.a=n},function(t,e,r){"use strict";function n(t){return t!==t}e.a=n},function(t,e,r){"use strict";function n(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}e.a=n},function(t,e,r){"use strict";function n(t,e){return(Object(s.default)(t)?o.a:a.a)(t,Object(i.a)(e))}var o=r(52),a=r(42),i=r(116),s=r(1);e.a=n},function(t,e,r){"use strict";function n(t){return Object(a.a)(function(e){var r=e.length,n=r,a=o.a.prototype.thru;for(t&&e.reverse();n--;){var v=e[n];if("function"!=typeof v)throw new TypeError(f);if(a&&!b&&"wrapper"==Object(s.a)(v))var b=new o.a([],!0)}for(n=b?n:r;++n<r;){v=e[n];var _=Object(s.a)(v),y="wrapper"==_?Object(i.a)(v):void 0;b=y&&Object(c.a)(y[0])&&y[1]==(h|l|p|d)&&!y[4].length&&1==y[9]?b[Object(s.a)(y[0])].apply(b,y[3]):1==v.length&&Object(c.a)(v)?b[_]():b.thru(v)}return function(){var t=arguments,n=t[0];if(b&&1==t.length&&Object(u.default)(n))return b.plant(n).value();for(var o=0,a=r?e[o].apply(this,t):n;++o<r;)a=e[o].call(this,a);return a}})}var o=r(78),a=r(72),i=r(80),s=r(120),u=r(1),c=r(121),f="Expected a function",l=8,p=32,h=128,d=256;e.a=n},function(t,e,r){"use strict";var n={};e.a=n},function(t,e,r){"use strict";function n(t){if(Object(u.a)(t)&&!Object(s.default)(t)&&!(t instanceof o.a)){if(t instanceof a.a)return t;if(l.call(t,"__wrapped__"))return Object(c.a)(t)}return new a.a(t)}var o=r(81),a=r(78),i=r(79),s=r(1),u=r(5),c=r(248),f=Object.prototype,l=f.hasOwnProperty;n.prototype=i.a.prototype,n.prototype.constructor=n,e.a=n},function(t,e,r){"use strict";function n(t){if(t instanceof o.a)return t.clone();var e=new a.a(t.__wrapped__,t.__chain__);return e.__actions__=Object(i.a)(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var o=r(81),a=r(78),i=r(61);e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7),o=r(250),a=r(9),i=r(251),s=Object(a.a)(function(t){var e=Object(n.a)(t,i.a);return e.length&&e[0]===t[0]?Object(o.a)(e):[]});e.default=s},function(t,e,r){"use strict";function n(t,e,r){for(var n=r?i.a:a.a,l=t[0].length,p=t.length,h=p,d=Array(p),v=1/0,b=[];h--;){var _=t[h];h&&e&&(_=Object(s.a)(_,Object(u.a)(e))),v=f(_.length,v),d[h]=!r&&(e||l>=120&&_.length>=120)?new o.a(h&&_):void 0}_=t[0];var y=-1,m=d[0];t:for(;++y<l&&b.length<v;){var g=_[y],O=e?e(g):g;if(g=r||0!==g?g:0,!(m?Object(c.a)(m,O):n(b,O,r))){for(h=p;--h;){var x=d[h];if(!(x?Object(c.a)(x,O):n(t[h],O,r)))continue t}m&&m.push(O),b.push(g)}}return b}var o=r(39),a=r(43),i=r(77),s=r(7),u=r(16),c=r(40),f=Math.min;e.a=n},function(t,e,r){"use strict";function n(t){return Object(o.a)(t)?t:[]}var o=r(44);e.a=n},function(t,e,r){"use strict";function n(t,e,r,n,x,j,T,E){var A=e&b;if(!A&&"function"!=typeof t)throw new TypeError(d);var w=n?n.length:0;if(w||(e&=~(m|g),n=x=void 0),T=void 0===T?T:O(Object(h.a)(T),0),E=void 0===E?E:Object(h.a)(E),w-=x?x.length:0,e&g){var M=n,C=x;n=x=void 0}var S=A?void 0:Object(c.a)(t),R=[t,e,r,n,x,M,C,j,T,E];if(S&&Object(f.a)(R,S),t=R[0],e=R[1],r=R[2],n=R[3],x=R[4],E=R[9]=void 0===R[9]?A?0:t.length:O(R[9]-w,0),!E&&e&(_|y)&&(e&=~(_|y)),e&&e!=v)P=e==_||e==y?Object(i.a)(t,e,E):e!=m&&e!=(v|m)||x.length?s.a.apply(void 0,R):Object(u.a)(t,e,r,n);else var P=Object(a.a)(t,e,r);var B=S?o.a:l.a;return Object(p.a)(B(P,R),t,e)}var o=r(125),a=r(253),i=r(254),s=r(126),u=r(260),c=r(80),f=r(261),l=r(130),p=r(131),h=r(21),d="Expected a function",v=1,b=2,_=8,y=16,m=32,g=64,O=Math.max;e.a=n},function(t,e,r){"use strict";function n(t,e,r){function n(){return(this&&this!==a.a&&this instanceof n?u:t).apply(s?r:this,arguments)}var s=e&i,u=Object(o.a)(t);return n}var o=r(45),a=r(4),i=1;e.a=n},function(t,e,r){"use strict";function n(t,e,r){function n(){for(var a=arguments.length,p=Array(a),h=a,d=Object(u.a)(n);h--;)p[h]=arguments[h];var v=a<3&&p[0]!==d&&p[a-1]!==d?[]:Object(c.a)(p,d);if((a-=v.length)<r)return Object(s.a)(t,e,i.a,n.placeholder,void 0,p,v,void 0,void 0,r-a);var b=this&&this!==f.a&&this instanceof n?l:t;return Object(o.a)(b,this,p)}var l=Object(a.a)(t);return n}var o=r(68),a=r(45),i=r(126),s=r(129),u=r(82),c=r(46),f=r(4);e.a=n},function(t,e,r){"use strict";function n(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}e.a=n},function(t,e,r){"use strict";function n(t){var e=t.match(o);return e?e[1].split(a):[]}var o=/\{\n\/\* \[wrapped with (.+)\] \*/,a=/,? & /;e.a=n},function(t,e,r){"use strict";function n(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(o,"{\n/* [wrapped with "+e+"] */\n")}var o=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.a=n},function(t,e,r){"use strict";function n(t,e){return Object(o.a)(i,function(r){var n="_."+r[0];e&r[1]&&!Object(a.a)(t,n)&&t.push(n)}),t.sort()}var o=r(52),a=r(43),i=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.a=n},function(t,e,r){"use strict";function n(t,e){for(var r=t.length,n=i(e.length,r),s=Object(o.a)(t);n--;){var u=e[n];t[n]=Object(a.a)(u,r)?s[u]:void 0}return t}var o=r(61),a=r(23),i=Math.min;e.a=n},function(t,e,r){"use strict";function n(t,e,r,n){function u(){for(var e=-1,a=arguments.length,s=-1,l=n.length,p=Array(l+a),h=this&&this!==i.a&&this instanceof u?f:t;++s<l;)p[s]=n[s];for(;a--;)p[s++]=arguments[++e];return Object(o.a)(h,c?r:this,p)}var c=e&s,f=Object(a.a)(t);return u}var o=r(68),a=r(45),i=r(4),s=1;e.a=n},function(t,e,r){"use strict";function n(t,e){var r=t[1],n=e[1],v=r|n,b=v<(u|c|p),_=n==p&&r==l||n==p&&r==h&&t[7].length<=e[8]||n==(p|h)&&e[7].length<=e[8]&&r==l;if(!b&&!_)return t;n&u&&(t[2]=e[2],v|=r&u?0:f);var y=e[3];if(y){var m=t[3];t[3]=m?Object(o.a)(m,y,e[4]):y,t[4]=m?Object(i.a)(t[3],s):e[4]}return y=e[5],y&&(m=t[5],t[5]=m?Object(a.a)(m,y,e[6]):y,t[6]=m?Object(i.a)(t[5],s):e[6]),y=e[7],y&&(t[7]=y),n&p&&(t[8]=null==t[8]?e[8]:d(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=v,t}var o=r(127),a=r(128),i=r(46),s="__lodash_placeholder__",u=1,c=2,f=4,l=8,p=128,h=256,d=Math.min;e.a=n},function(t,e,r){"use strict";function n(t){if(!t)return 0===t?t:0;if((t=Object(o.a)(t))===a||t===-a){return(t<0?-1:1)*i}return t===t?t:0}var o=r(263),a=1/0,i=1.7976931348623157e308;e.a=n},function(t,e,r){"use strict";function n(t){if("number"==typeof t)return t;if(Object(a.a)(t))return i;if(Object(o.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(o.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var r=c.test(t);return r||f.test(t)?l(t.slice(2),r?2:8):u.test(t)?i:+t}var o=r(6),a=r(25),i=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,f=/^0o[0-7]+$/i,l=parseInt;e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(26),o=r(9),a=r(132),i=r(44),s=Object(o.a)(function(t){return Object(a.a)(Object(n.a)(t,1,i.a,!0))});e.default=s},function(t,e,r){"use strict";var n=r(98),o=r(119),a=r(75),i=n.a&&1/Object(a.a)(new n.a([,-0]))[1]==1/0?function(t){return new n.a(t)}:o.a;e.a=i},function(t,e,r){"use strict";function n(t){return null==t?[]:Object(o.a)(t,Object(a.default)(t))}Object.defineProperty(e,"__esModule",{value:!0});var o=r(267),a=r(11);e.default=n},function(t,e,r){"use strict";function n(t,e){return Object(o.a)(e,function(e){return t[e]})}var o=r(7);e.a=n},function(t,e,r){"use strict";function n(t,e,r){var n=null==t?0:t.length;return n?(e=r||void 0===e?1:Object(a.a)(e),Object(o.a)(t,e<0?0:e,n)):[]}Object.defineProperty(e,"__esModule",{value:!0});var o=r(41),a=r(21);e.default=n},function(t,e,r){"use strict";var n=r(15),o=r(270),a=r(34),i=Object(o.a)(function(t,e){Object(n.a)(e,Object(a.a)(e),t)});e.a=i},function(t,e,r){"use strict";function n(t){return Object(o.a)(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,s&&Object(a.a)(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var u=r[n];u&&t(e,u,n,i)}return e})}var o=r(9),a=r(70);e.a=n},function(t,e,r){"use strict";function n(t,e){return null!=t&&Object(a.a)(t,e,o.a)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(272),a=r(107);e.default=n},function(t,e,r){"use strict";function n(t,e){return null!=t&&a.call(t,e)}var o=Object.prototype,a=o.hasOwnProperty;e.a=n},function(t,e,r){"use strict";function n(t,e,r,o){this.message=t,this.expected=e,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}function o(t,e){function o(t,e){return{type:"literal",text:t,ignoreCase:e}}function a(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function i(t){return{type:"other",description:t}}function s(e){var r,n=ie[e];if(n)return n;for(r=e-1;!ie[r];)r--;for(n=ie[r],n={line:n.line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return ie[e]=n,n}function u(t,e){var r=s(t),n=s(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function c(t){oe<se||(oe>se&&(se=oe,ue=[]),ue.push(t))}function f(t,e,r){return new n(n.buildMessage(t,e),t,e,r)}function l(){var e,r,n,o,a,i,s,u,f,l,h;if(e=oe,r=oe,(n=M())!==L)if((o=p())!==L)if((a=M())!==L){for(i=[],s=oe,59===t.charCodeAt(oe)?(u=D,oe++):(u=L,0===ce&&c(N)),u!==L?(f=M(),f!==L?(l=p(),l!==L?(h=M(),h!==L?(u=[u,f,l,h],s=u):(oe=s,s=L)):(oe=s,s=L)):(oe=s,s=L)):(oe=s,s=L);s!==L;)i.push(s),s=oe,59===t.charCodeAt(oe)?(u=D,oe++):(u=L,0===ce&&c(N)),u!==L?(f=M(),f!==L?(l=p(),l!==L?(h=M(),h!==L?(u=[u,f,l,h],s=u):(oe=s,s=L)):(oe=s,s=L)):(oe=s,s=L)):(oe=s,s=L);i!==L?(59===t.charCodeAt(oe)?(s=D,oe++):(s=L,0===ce&&c(N)),s===L&&(s=null),s!==L?(u=M(),u!==L?(n=[n,o,a,i,s,u],r=n):(oe=r,r=L)):(oe=r,r=L)):(oe=r,r=L)}else oe=r,r=L;else oe=r,r=L;else oe=r,r=L;return r!==L&&(ae=e,r=G(r)),e=r}function p(){var e,r,n,o,a,i;return e=oe,r=j(),r!==L?(n=M(),n!==L?(61===t.charCodeAt(oe)?(o=V,oe++):(o=L,0===ce&&c(k)),o!==L?(a=M(),a!==L?(i=_(),i!==L?(ae=e,r=z(r,i),e=r):(oe=e,e=L)):(oe=e,e=L)):(oe=e,e=L)):(oe=e,e=L)):(oe=e,e=L),e===L&&(e=_()),e}function h(){var e;return 43===t.charCodeAt(oe)?(e=q,oe++):(e=L,0===ce&&c(W)),e===L&&(45===t.charCodeAt(oe)?(e=X,oe++):(e=L,0===ce&&c(H))),e}function d(){var e;return 43===t.charCodeAt(oe)?(e=q,oe++):(e=L,0===ce&&c(W)),e===L&&(45===t.charCodeAt(oe)?(e=X,oe++):(e=L,0===ce&&c(H))),e}function v(){var e;return 42===t.charCodeAt(oe)?(e=Y,oe++):(e=L,0===ce&&c($)),e===L&&(47===t.charCodeAt(oe)?(e=J,oe++):(e=L,0===ce&&c(Q)),e===L&&(37===t.charCodeAt(oe)?(e=K,oe++):(e=L,0===ce&&c(Z)))),e}function b(){var e;return 38===t.charCodeAt(oe)?(e=tt,oe++):(e=L,0===ce&&c(et)),e===L&&(124===t.charCodeAt(oe)?(e=rt,oe++):(e=L,0===ce&&c(nt))),e}function _(){var t,e,r,n,o,a,i,s;if(t=oe,(e=y())!==L){for(r=[],n=oe,o=M(),o!==L?(a=b(),a!==L?(i=M(),i!==L?(s=y(),s!==L?(o=[o,a,i,s],n=o):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L);n!==L;)r.push(n),n=oe,o=M(),o!==L?(a=b(),a!==L?(i=M(),i!==L?(s=y(),s!==L?(o=[o,a,i,s],n=o):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L);r!==L?(ae=t,e=ot(e,r),t=e):(oe=t,t=L)}else oe=t,t=L;return t}function y(){var t,e,r,n,o,a,i,s;if(t=oe,(e=m())!==L){for(r=[],n=oe,o=M(),o!==L?(a=d(),a!==L?(i=M(),i!==L?(s=m(),s!==L?(o=[o,a,i,s],n=o):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L);n!==L;)r.push(n),n=oe,o=M(),o!==L?(a=d(),a!==L?(i=M(),i!==L?(s=m(),s!==L?(o=[o,a,i,s],n=o):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L);r!==L?(ae=t,e=ot(e,r),t=e):(oe=t,t=L)}else oe=t,t=L;return t}function m(){var t,e,r,n,o,a,i,s;if(t=oe,(e=g())!==L){for(r=[],n=oe,o=M(),o!==L?(a=v(),a!==L?(i=M(),i!==L?(s=g(),s!==L?(o=[o,a,i,s],n=o):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L);n!==L;)r.push(n),n=oe,o=M(),o!==L?(a=v(),a!==L?(i=M(),i!==L?(s=g(),s!==L?(o=[o,a,i,s],n=o):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L)):(oe=n,n=L);r!==L?(ae=t,e=ot(e,r),t=e):(oe=t,t=L)}else oe=t,t=L;return t}function g(){var t,e,r,n;return t=oe,e=h(),e!==L?(r=M(),r!==L?(n=O(),n!==L?(ae=t,e=at(e,n),t=e):(oe=t,t=L)):(oe=t,t=L)):(oe=t,t=L),t===L&&(t=O()),t}function O(){var e,r,n,o,a,i,s,u,f,l,p;if(e=oe,r=oe,it.test(t.charAt(oe))?(n=t.charAt(oe),oe++):(n=L,0===ce&&c(st)),n!==L){for(o=[],ut.test(t.charAt(oe))?(a=t.charAt(oe),oe++):(a=L,0===ce&&c(ct));a!==L;)o.push(a),ut.test(t.charAt(oe))?(a=t.charAt(oe),oe++):(a=L,0===ce&&c(ct));o!==L?(n=[n,o],r=n):(oe=r,r=L)}else oe=r,r=L;if(r!==L)if((n=M())!==L)if(40===t.charCodeAt(oe)?(o=ft,oe++):(o=L,0===ce&&c(lt)),o!==L){for(a=oe,i=[],s=oe,u=M(),u!==L?(f=_(),f!==L?(l=M(),l!==L?(44===t.charCodeAt(oe)?(p=pt,oe++):(p=L,0===ce&&c(ht)),p!==L?(u=[u,f,l,p],s=u):(oe=s,s=L)):(oe=s,s=L)):(oe=s,s=L)):(oe=s,s=L);s!==L;)i.push(s),s=oe,u=M(),u!==L?(f=_(),f!==L?(l=M(),l!==L?(44===t.charCodeAt(oe)?(p=pt,oe++):(p=L,0===ce&&c(ht)),p!==L?(u=[u,f,l,p],s=u):(oe=s,s=L)):(oe=s,s=L)):(oe=s,s=L)):(oe=s,s=L);i!==L?(s=M(),s!==L?(u=_(),u!==L?(i=[i,s,u],a=i):(oe=a,a=L)):(oe=a,a=L)):(oe=a,a=L),a===L&&(a=null),a!==L?(i=M(),i!==L?(41===t.charCodeAt(oe)?(s=dt,oe++):(s=L,0===ce&&c(vt)),s!==L?(ae=e,r=bt(r,a),e=r):(oe=e,e=L)):(oe=e,e=L)):(oe=e,e=L)}else oe=e,e=L;else oe=e,e=L;else oe=e,e=L;return e===L&&(e=x()),e}function x(){var e,r,n,o;return e=w(),e===L&&(e=E())===L&&(e=A())===L&&(e=T())===L&&(e=oe,40===t.charCodeAt(oe)?(r=ft,oe++):(r=L,0===ce&&c(lt)),r!==L?(n=_(),n!==L?(41===t.charCodeAt(oe)?(o=dt,oe++):(o=L,0===ce&&c(vt)),o!==L?(ae=e,r=_t(n),e=r):(oe=e,e=L)):(oe=e,e=L)):(oe=e,e=L)),e}function j(){var t;return t=A(),t===L&&(t=T()),t}function T(){var e,r,n,o,a;if(e=oe,r=oe,it.test(t.charAt(oe))?(n=t.charAt(oe),oe++):(n=L,0===ce&&c(st)),n!==L){for(o=[],ut.test(t.charAt(oe))?(a=t.charAt(oe),oe++):(a=L,0===ce&&c(ct));a!==L;)o.push(a),ut.test(t.charAt(oe))?(a=t.charAt(oe),oe++):(a=L,0===ce&&c(ct));o!==L?(n=[n,o],r=n):(oe=r,r=L)}else oe=r,r=L;return r!==L&&(ae=e,r=yt(r)),e=r}function E(){var e,r,n,o;if(e=oe,36===t.charCodeAt(oe)?(r=mt,oe++):(r=L,0===ce&&c(gt)),r!==L){for(n=[],ut.test(t.charAt(oe))?(o=t.charAt(oe),oe++):(o=L,0===ce&&c(ct));o!==L;)n.push(o),ut.test(t.charAt(oe))?(o=t.charAt(oe),oe++):(o=L,0===ce&&c(ct));n!==L?(ae=e,r=Ot(n),e=r):(oe=e,e=L)}else oe=e,e=L;return e}function A(){var e,r,n,o,a,i,s;if(e=oe,64===t.charCodeAt(oe)?(r=xt,oe++):(r=L,0===ce&&c(jt)),r!==L){for(n=[],ut.test(t.charAt(oe))?(o=t.charAt(oe),oe++):(o=L,0===ce&&c(ct));o!==L;)n.push(o),ut.test(t.charAt(oe))?(o=t.charAt(oe),oe++):(o=L,0===ce&&c(ct));n!==L?(ae=e,r=Tt(n),e=r):(oe=e,e=L)}else oe=e,e=L;return e===L&&(e=oe,r=oe,Et.test(t.charAt(oe))?(n=t.charAt(oe),oe++):(n=L,0===ce&&c(At)),n!==L?(wt.test(t.charAt(oe))?(o=t.charAt(oe),oe++):(o=L,0===ce&&c(Mt)),o!==L?(Ct.test(t.charAt(oe))?(a=t.charAt(oe),oe++):(a=L,0===ce&&c(St)),a!==L?(Rt.test(t.charAt(oe))?(i=t.charAt(oe),oe++):(i=L,0===ce&&c(Pt)),i!==L?(Rt.test(t.charAt(oe))?(s=t.charAt(oe),oe++):(s=L,0===ce&&c(Pt)),s!==L?(n=[n,o,a,i,s],r=n):(oe=r,r=L)):(oe=r,r=L)):(oe=r,r=L)):(oe=r,r=L)):(oe=r,r=L),r!==L&&(ae=e,r=Bt(r)),e=r),e}function w(){var e,r,n,o,a,i,s,u,f;for(e=oe,r=oe,n=[],Rt.test(t.charAt(oe))?(o=t.charAt(oe),oe++):(o=L,0===ce&&c(Pt));o!==L;)n.push(o),Rt.test(t.charAt(oe))?(o=t.charAt(oe),oe++):(o=L,0===ce&&c(Pt));if(n!==L)if(46===t.charCodeAt(oe)?(o=Ft,oe++):(o=L,0===ce&&c(Lt)),o!==L){if(a=[],Rt.test(t.charAt(oe))?(i=t.charAt(oe),oe++):(i=L,0===ce&&c(Pt)),i!==L)for(;i!==L;)a.push(i),Rt.test(t.charAt(oe))?(i=t.charAt(oe),oe++):(i=L,0===ce&&c(Pt));else a=L;if(a!==L){if(i=oe,Ut.test(t.charAt(oe))?(s=t.charAt(oe),oe++):(s=L,0===ce&&c(It)),s!==L){if(u=[],Rt.test(t.charAt(oe))?(f=t.charAt(oe),oe++):(f=L,0===ce&&c(Pt)),f!==L)for(;f!==L;)u.push(f),Rt.test(t.charAt(oe))?(f=t.charAt(oe),oe++):(f=L,0===ce&&c(Pt));else u=L;u!==L?(s=[s,u],i=s):(oe=i,i=L)}else oe=i,i=L;i===L&&(i=null),i!==L?(n=[n,o,a,i],r=n):(oe=r,r=L)}else oe=r,r=L}else oe=r,r=L;else oe=r,r=L;if(r!==L&&(ae=e,r=Dt(r)),(e=r)===L){if(e=oe,r=[],Nt.test(t.charAt(oe))?(n=t.charAt(oe),oe++):(n=L,0===ce&&c(Gt)),n!==L)for(;n!==L;)r.push(n),Nt.test(t.charAt(oe))?(n=t.charAt(oe),oe++):(n=L,0===ce&&c(Gt));else r=L;if(r!==L?(Vt.test(t.charAt(oe))?(n=t.charAt(oe),oe++):(n=L,0===ce&&c(kt)),n!==L?(ae=e,r=zt(r),e=r):(oe=e,e=L)):(oe=e,e=L),e===L){if(e=oe,r=[],Rt.test(t.charAt(oe))?(n=t.charAt(oe),oe++):(n=L,0===ce&&c(Pt)),n!==L)for(;n!==L;)r.push(n),Rt.test(t.charAt(oe))?(n=t.charAt(oe),oe++):(n=L,0===ce&&c(Pt));else r=L;r!==L?(qt.test(t.charAt(oe))?(n=t.charAt(oe),oe++):(n=L,0===ce&&c(Wt)),n===L&&(n=null),n!==L?(ae=e,r=Xt(r),e=r):(oe=e,e=L)):(oe=e,e=L)}}return e}function M(){var t,e;for(t=[],e=C(),e===L&&(e=S())===L&&(e=R());e!==L;)t.push(e),(e=C())===L&&(e=S())===L&&(e=R());return t}function C(){var e;return Ht.test(t.charAt(oe))?(e=t.charAt(oe),oe++):(e=L,0===ce&&c(Yt)),e}function S(){var e;return $t.test(t.charAt(oe))?(e=t.charAt(oe),oe++):(e=L,0===ce&&c(Jt)),e}function R(){var e,r,n,o,a,i;if(e=oe,t.substr(oe,2)===Qt?(r=Qt,oe+=2):(r=L,0===ce&&c(Kt)),r!==L){for(n=[],o=oe,a=oe,ce++,t.substr(oe,2)===Zt?(i=Zt,oe+=2):(i=L,0===ce&&c(te)),ce--,i===L?a=void 0:(oe=a,a=L),a!==L?(t.length>oe?(i=t.charAt(oe),oe++):(i=L,0===ce&&c(ee)),i!==L?(a=[a,i],o=a):(oe=o,o=L)):(oe=o,o=L);o!==L;)n.push(o),o=oe,a=oe,ce++,t.substr(oe,2)===Zt?(i=Zt,oe+=2):(i=L,0===ce&&c(te)),ce--,i===L?a=void 0:(oe=a,a=L),a!==L?(t.length>oe?(i=t.charAt(oe),oe++):(i=L,0===ce&&c(ee)),i!==L?(a=[a,i],o=a):(oe=o,o=L)):(oe=o,o=L);n!==L?(t.substr(oe,2)===Zt?(o=Zt,oe+=2):(o=L,0===ce&&c(te)),o!==L?(r=[r,n,o],e=r):(oe=e,e=L)):(oe=e,e=L)}else oe=e,e=L;if(e===L)if(e=oe,t.substr(oe,2)===re?(r=re,oe+=2):(r=L,0===ce&&c(ne)),r!==L){for(n=[],o=oe,a=oe,ce++,i=S(),ce--,i===L?a=void 0:(oe=a,a=L),a!==L?(t.length>oe?(i=t.charAt(oe),oe++):(i=L,0===ce&&c(ee)),i!==L?(a=[a,i],o=a):(oe=o,o=L)):(oe=o,o=L);o!==L;)n.push(o),o=oe,a=oe,ce++,i=S(),ce--,i===L?a=void 0:(oe=a,a=L),a!==L?(t.length>oe?(i=t.charAt(oe),oe++):(i=L,0===ce&&c(ee)),i!==L?(a=[a,i],o=a):(oe=o,o=L)):(oe=o,o=L);n!==L?(r=[r,n],e=r):(oe=e,e=L)}else oe=e,e=L;return e}function P(t,e){var r=t;return e.forEach(function(t){r=new he.BinaryExpr(t[1],r,t[3])}),r}function B(t){return fe(t).join("")}e=void 0!==e?e:{};var F,L={},U={program:l},I=l,D=";",N=o(";",!1),G=function(t){var e=[t[1]];return e=e.concat(le(t[3],function(t){return t[2]})),new he.Program(e)},V="=",k=o("=",!1),z=function(t,e){return new he.Assignment(t,e)},q="+",W=o("+",!1),X="-",H=o("-",!1),Y="*",$=o("*",!1),J="/",Q=o("/",!1),K="%",Z=o("%",!1),tt="&",et=o("&",!1),rt="|",nt=o("|",!1),ot=function(t,e){return P(t,e)},at=function(t,e){return new he.UnaryExpr(t,e)},it=/^[a-zA-Z_]/,st=a([["a","z"],["A","Z"],"_"],!1,!1),ut=/^[a-zA-Z_0-9]/,ct=a([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),ft="(",lt=o("(",!1),pt=",",ht=o(",",!1),dt=")",vt=o(")",!1),bt=function(t,e){var r=[];return pe(e[0],function(t){r.push(t[1])}),r.push(e[2]),new he.FuncCall(B(t),r)},_t=function(t){return t},yt=function(t){return new he.PrimaryExpr(B(t).toLowerCase(),"ID")},mt="$",gt=o("$",!1),Ot=function(t){return new he.PrimaryExpr(B(t).toLowerCase(),"CONST")},xt="@",jt=o("@",!1),Tt=function(t){return new he.PrimaryExpr("__REG_AT_"+B(t).toLowerCase(),"REG")},Et=/^[rR]/,At=a(["r","R"],!1,!1),wt=/^[eE]/,Mt=a(["e","E"],!1,!1),Ct=/^[gG]/,St=a(["g","G"],!1,!1),Rt=/^[0-9]/,Pt=a([["0","9"]],!1,!1),Bt=function(t){return new he.PrimaryExpr("__REG_"+B(t).toLowerCase(),"REG")},Ft=".",Lt=o(".",!1),Ut=/^[Ee]/,It=a(["E","e"],!1,!1),Dt=function(t){return new he.PrimaryExpr(parseFloat(B(t)),"VALUE")},Nt=/^[a-fA-F0-9]/,Gt=a([["a","f"],["A","F"],["0","9"]],!1,!1),Vt=/^[hH]/,kt=a(["h","H"],!1,!1),zt=function(t){return new he.PrimaryExpr(parseInt(B(t),16),"VALUE")},qt=/^[dD]/,Wt=a(["d","D"],!1,!1),Xt=function(t){return new he.PrimaryExpr(parseInt(B(t),10),"VALUE")},Ht=/^[\t\x0B\f \xA0\uFEFF]/,Yt=a(["\t","\v","\f"," ","","\ufeff"],!1,!1),$t=/^[\n\r\u2028\u2029]/,Jt=a(["\n","\r","\u2028","\u2029"],!1,!1),Qt="/*",Kt=o("/*",!1),Zt="*/",te=o("*/",!1),ee=function(){return{type:"any"}}(),re="//",ne=o("//",!1),oe=0,ae=0,ie=[{line:1,column:1}],se=0,ue=[],ce=0;if("startRule"in e){if(!(e.startRule in U))throw new Error("Can't start parsing from rule \""+e.startRule+'".');I=U[e.startRule]}var fe=r(38).default,le=r(13).default,pe=r(12).default,he=r(134);if((F=I())!==L&&oe===t.length)return F;throw F!==L&&oe<t.length&&c(function(){return{type:"end"}}()),f(ue,se<t.length?t.charAt(se):null,se<t.length?u(se,se+1):u(se,se))}!function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(n,Error),n.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function a(t){return i[t.type](t)}var i={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=a(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+n(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:n,parse:o}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o,a=r(2),i=r(0);!function(t){t[t.SAVE=0]="SAVE",t[t.RESTORE=1]="RESTORE",t[t.SAVERESTORE=2]="SAVERESTORE",t[t.RESTORESAVE=3]="RESTORESAVE"}(o||(o={}));var s=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.updateAction(),this.updateBlendMode(),this.updateBuffer()},e.prototype.draw=function(){var t;this.action===o.SAVERESTORE||this.action===o.RESTORESAVE?(t=this.nextAction,this.nextAction=this.nextAction===o.SAVE?o.RESTORE:o.SAVE):t=this.action;var e=this.main.getTempTSM();switch(t){case o.SAVE:e.setAsRenderTarget(this.opts.bufferId),this.main.getCopier().run(null,{srcTexture:this.parent.getTSM().getCurrentTexture()}),e.unsetAsRenderTarget();break;case o.RESTORE:this.main.getCopier().run(this.parent.getTSM(),{srcTexture:e.getTexture(this.opts.bufferId)},this.blendMode)}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.main.getTempTSM().removeTexture(this.opts.bufferId)},e.prototype.updateAction=function(){this.action=o[this.opts.action],this.action===o.SAVERESTORE?this.nextAction=o.SAVE:this.action===o.RESTORESAVE&&(this.nextAction=o.RESTORE)},e.prototype.updateBuffer=function(t,e,r){this.opts.bufferId=this.opts.bufferId+"",r&&this.main.getTempTSM().removeTexture(r),this.main.getTempTSM().addTexture(this.opts.bufferId)},e.prototype.updateBlendMode=function(){this.blendMode=i.BlendMode[this.opts.blendMode]},e.componentName="BufferSave",e.componentTag="misc",e.optUpdateHandlers={action:"updateAction",blendMode:"updateBlendMode",bufferId:"updateBuffer"},e.defaultOptions={action:"SAVE",blendMode:"REPLACE",bufferId:"buffer1"},e}(a.default);e.default=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(28),i=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.updateCode(),this.listenTo(this.main,"resize",this.handleResize)},e.prototype.draw=function(){var t=this.code;t.b=this.main.getAnalyser().isBeat()?1:0,this.inited||(t.init(),this.inited=!0),this.main.getAnalyser().isBeat()&&t.onBeat(),t.perFrame()},e.prototype.updateCode=function(){this.code=a.default(this.opts.code,["init","onBeat","perFrame"]).codeInst,this.code.setup(this.main),this.inited=!1},e.prototype.handleResize=function(){this.code.updateDimVars(this.main.getRctx().getGl())},e.componentName="GlobalVar",e.componentTag="misc",e.optUpdateHandlers={code:"updateCode"},e.defaultOptions={code:{init:"",onBeat:"",perFrame:""}},e}(o.default);e.default=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(0),i=r(139),s=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.prevBeat=!1,this.beatCount=0,this.updateColor(),this.updateProgram()},e.prototype.draw=function(){var t=!1;0===this.opts.beatCount?t=!0:(this.main.getAnalyser().isBeat()&&!this.prevBeat&&++this.beatCount>=this.opts.beatCount&&(t=!0,this.beatCount=0),this.prevBeat=this.main.getAnalyser().isBeat()),t&&this.program.run(this.parent.getTSM(),{color:this.color})},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy()},e.prototype.updateColor=function(){this.color=a.parseColorNorm(this.opts.color)},e.prototype.updateProgram=function(){var t=a.BlendMode[this.opts.blendMode],e=new i.default(this.main.getRctx(),t);this.program&&this.program.destroy(),this.program=e},e.componentName="ClearScreen",e.componentTag="render",e.defaultOptions={beatCount:0,blendMode:"REPLACE",color:"#000000"},e.optUpdateHandlers={blendMode:"updateProgram",color:"updateColor"},e}(o.default);e.default=s},function(t,e,r){"use strict";function n(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var s=null==r?0:Object(a.a)(r);return s<0&&(s=i(n+s,0)),Object(o.a)(t,e,s)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(115),a=r(21),i=Math.max;e.default=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(0),i=r(85),s=r(3),u=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.centerX=0,this.centerY=0,this.velocityX=0,this.velocityY=0,this.posX=0,this.posY=0,this.updateBlendMode();var t=this.main.getRctx().getGl();this.program=new s.default(this.main.getRctx(),{bindings:{attribs:{points:{name:"a_points",drawMode:t.TRIANGLE_FAN}},uniforms:{color:{name:"u_color",valueType:a.WebGLVarType._3FV},position:{name:"u_position",valueType:a.WebGLVarType._2FV},scale:{name:"u_scale",valueType:a.WebGLVarType._2FV}}},copyOnSwap:!0,dynamicBlend:!0,fragmentShader:"\n                uniform vec3 u_color;\n                void main() {\n                   setFragColor(vec4(u_color, 1));\n                }\n            ",vertexShader:"\n                attribute vec2 a_point;\n                uniform vec2 u_position;\n                uniform vec2 u_scale;\n                void main() {\n                   setPosition((a_point*u_scale)+u_position);\n                }\n            "}),this.updateColor()},e.prototype.draw=function(){this.main.getAnalyser().isBeat()&&(this.centerX=.3*(2*Math.random()-1),this.centerY=.3*(2*Math.random()-1)),this.velocityX-=.004*(this.posX-this.centerX),this.velocityY-=.004*(this.posY-this.centerY),this.posX+=this.velocityX,this.posY+=this.velocityY,this.velocityX*=.991,this.velocityY*=.991;var t,e,r=this.posX*this.opts.distance,n=this.posY*this.opts.distance;this.opts.onBeatSizeChange&&this.main.getAnalyser().isBeat()?(t=this.opts.onBeatParticleSize,e=this.opts.onBeatParticleSize):(t=this.opts.particleSize,e=this.opts.particleSize);var o=this.main.getRctx().getGl();t=2*t/o.drawingBufferWidth,e=2*e/o.drawingBufferHeight,this.program.run(this.parent.getTSM(),{color:this.color,points:i.circleGeometry(this.main.getRctx()),position:[r,n],scale:[t,e]},this.blendMode)},e.prototype.updateBlendMode=function(){this.blendMode=a.BlendMode[this.opts.blendMode]},e.prototype.updateColor=function(){this.color=a.parseColorNorm(this.opts.color)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy()},e.componentName="MovingParticle",e.componentTag="render",e.optUpdateHandlers={blendMode:"updateBlendMode",color:"updateColor"},e.defaultOptions={blendMode:"REPLACE",color:"#FFFFFF",distance:.7,onBeatParticleSize:10,onBeatSizeChange:!1,particleSize:10},e}(o.default);e.default=u},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(0),i=r(85),s=r(3),u=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){var t=this.main.getRctx().getGl();this.program=new s.default(this.main.getRctx(),{bindings:{attribs:{points:{name:"a_texVertex",drawMode:t.TRIANGLES}},uniforms:{image:{name:"u_image",valueType:a.WebGLVarType.TEXTURE2D},imageRes:{name:"u_texRes",valueType:a.WebGLVarType._2FV},position:{name:"u_pos",valueType:a.WebGLVarType._2FV}}},copyOnSwap:!0,fragmentShader:"\n                uniform sampler2D u_image;\n                varying vec2 v_texCoord;\n                void main() {\n                   setFragColor(texture2D(u_image, v_texCoord));\n                }\n            ",vertexShader:"\n                attribute vec2 a_texVertex;\n                uniform vec2 u_pos;\n                uniform vec2 u_texRes;\n                varying vec2 v_texCoord;\n\n                void main() {\n                   v_texCoord = a_texVertex;\n                   setPosition(a_texVertex*(u_texRes/u_resolution)*vec2(2,-2)+u_pos);\n                }\n            "}),this.updateImage()},e.prototype.draw=function(){this.program.run(this.parent.getTSM(),{image:this.texture,imageRes:[this.width,this.height],points:i.squareGeometry(this.main.getRctx(),!0),position:[this.opts.x,-this.opts.y]})},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy(),this.main.getRctx().getGl().deleteTexture(this.texture)},e.prototype.updateImage=function(){var t=this,e=this.main.getRctx().getGl();this.main.getRsrcMan().getImage(this.opts.src,function(r){t.width=r.width,t.height=r.height,t.texture?e.bindTexture(e.TEXTURE_2D,t.texture):(t.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})},e.componentName="Picture",e.componentTag="render",e.optUpdateHandlers={src:"updateImage"},e.defaultOptions={src:"avsres_texer_circle_edgeonly_19x19.bmp",x:0,y:0},e}(o.default);e.default=u},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o,a=r(12),i=r(13),s=r(2),u=r(84),c=r(28),f=r(0),l=r(29),p=r(3);!function(t){t[t.LINES=1]="LINES",t[t.DOTS=2]="DOTS"}(o||(o={}));var h=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.updateDrawMode(),this.updateSource(),this.updateProgram(),this.updateCode(),this.updateClones(),this.updateSpeed(),this.updateColors(),this.updateChannel(),this.updateThickness(),this.listenTo(this.main,"resize",this.handleResize),this.pointBuffer=new l.default(this.main.getRctx()),this.colorBuffer=new l.default(this.main.getRctx())},e.prototype.draw=function(){var t=this,e=this._makeColor();a.default(this.code,function(r){t.drawScope(r,e,!t.inited)}),this.inited=!0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy(),this.pointBuffer.destroy(),this.colorBuffer.destroy()},e.prototype.drawScope=function(t,e,r){var n=this.main.getRctx().getGl();t.red=e[0],t.green=e[1],t.blue=e[2],r&&t.init();var a=this.main.getAnalyser().isBeat();t.b=a?1:0,t.perFrame(),a&&t.onBeat();var i,s=Math.floor(t.n);i=this.source===f.Source.SPECTRUM?this.main.getAnalyser().getSpectrum(this.channel):this.main.getAnalyser().getWaveform(this.channel);var u,c,l,p,h,d=this.drawMode===o.DOTS,v=i.length/s,b=0,_=0;this.veryThick?(u=d?6*s:6*s-6,c=this.opts.thickness/n.drawingBufferWidth,l=this.opts.thickness/n.drawingBufferHeight):u=d?s:2*s-2;for(var y=new Float32Array(2*u),m=new Float32Array(3*u),g=0;g<s;g++){for(var O=0,x=0,j=Math.floor(g*v);j<(g+1)*v;j++,x++)O+=i[j];O/=x;var T=g/(s>1?s-1:1);if(t.i=T,t.v=O,t.perPoint(),t.y*=-1,this.veryThick)if(d){y[b++]=t.x-c,y[b++]=t.y-l,y[b++]=t.x+c,y[b++]=t.y-l,y[b++]=t.x-c,y[b++]=t.y+l,y[b++]=t.x+c,y[b++]=t.y-l,y[b++]=t.x-c,y[b++]=t.y+l,y[b++]=t.x+c,y[b++]=t.y+l;for(var j=0;j<6;j++)m[_++]=t.red,m[_++]=t.green,m[_++]=t.blue}else{if(0!==g){var E=Math.abs(p-t.x),A=Math.abs(h-t.y),w=E<=A?c:0,M=E>A?l:0;y[b++]=p+w,y[b++]=h+M,y[b++]=t.x+w,y[b++]=t.y+M,y[b++]=p-w,y[b++]=h-M,y[b++]=t.x+w,y[b++]=t.y+M,y[b++]=p-w,y[b++]=h-M,y[b++]=t.x-w,y[b++]=t.y-M;for(var j=0;j<6;j++)m[_++]=t.red,m[_++]=t.green,m[_++]=t.blue}p=t.x,h=t.y,t.red,t.green,t.blue}else if(d)y[b++]=t.x,y[b++]=t.y,m[_++]=t.red,m[_++]=t.green,m[_++]=t.blue;else{if(0!==g){y[b++]=p,y[b++]=h,y[b++]=t.x,y[b++]=t.y;for(var j=0;j<2;j++)m[_++]=t.red,m[_++]=t.green,m[_++]=t.blue}p=t.x,h=t.y,t.red,t.green,t.blue}}this.pointBuffer.setData(y),this.colorBuffer.setData(m),this.program.run(this.parent.getTSM(),{colors:this.colorBuffer,drawTriangles:this.veryThick,isDots:d,pointSize:this.veryThick?1:this.opts.thickness,points:this.pointBuffer})},e.prototype.updateProgram=function(){var t=f.BlendMode[this.opts.blendMode],e=new p.default(this.main.getRctx(),{bindings:{attribs:{colors:{name:"a_color",size:3},points:{name:"a_position"}},uniforms:{pointSize:{name:"u_pointSize",valueType:f.WebGLVarType._1F}}},blendMode:t,copyOnSwap:!0,drawHook:function(t,e){var r;t.isDots||(r=e.getParameter(e.LINE_WIDTH),e.lineWidth(t.pointSize));var n;n=t.drawTriangles?e.TRIANGLES:t.isDots?e.POINTS:e.LINES,e.drawArrays(n,0,t.points.getLength()/2),t.isDots||e.lineWidth(r)},fragmentShader:"\n                varying vec3 v_color;\n                void main() {\n                    setFragColor(vec4(v_color, 1));\n                }\n            ",vertexShader:"\n                attribute vec2 a_position;\n                attribute vec3 a_color;\n                varying vec3 v_color;\n                uniform float u_pointSize;\n                void main() {\n                    gl_PointSize = u_pointSize;\n                    setPosition(a_position);\n                    v_color = a_color;\n                }\n            "});this.program&&this.program.destroy(),this.program=e},e.prototype.updateCode=function(){var t=c.default(this.opts.code,["init","onBeat","perFrame","perPoint"]).codeInst;t.n=100,t.setup(this.main),this.inited=!1,this.code=[t]},e.prototype.updateClones=function(){this.code=u.default.clone(this.code,this.opts.clone)},e.prototype.updateColors=function(){this.colors=i.default(this.opts.colors,f.parseColorNorm),this.curColorId=0},e.prototype.updateSpeed=function(){var t=this.maxStep;this.maxStep=Math.floor(1/this.opts.cycleSpeed),this.curStep?this.curStep=Math.floor(this.curStep/t*this.maxStep):this.curStep=0},e.prototype.updateChannel=function(){this.channel=f.Channels[this.opts.channel]},e.prototype.updateSource=function(){this.source=f.Source[this.opts.source]},e.prototype.updateDrawMode=function(){this.drawMode=o[this.opts.drawMode]},e.prototype.updateThickness=function(){var t,e=this.main.getRctx().getGl();t=this.drawMode===o.DOTS?e.getParameter(e.ALIASED_POINT_SIZE_RANGE):e.getParameter(e.ALIASED_LINE_WIDTH_RANGE),this.opts.thickness<t[0]||this.opts.thickness>t[1]?this.veryThick=!0:this.veryThick=!1},e.prototype._makeColor=function(){if(1===this.colors.length)return this.colors[0];for(var t=[0,0,0],e=this.colors[this.curColorId],r=this.colors[(this.curColorId+1)%this.colors.length],n=this.curStep/this.maxStep,o=0;o<3;o++)t[o]=e[o]*(1-n)+r[o]*n;return this.curStep=(this.curStep+1)%this.maxStep,0===this.curStep&&(this.curColorId=(this.curColorId+1)%this.colors.length),t},e.prototype.handleResize=function(){var t=this;a.default(this.code,function(e){e.updateDimVars(t.main.getRctx().getGl())})},e.componentName="SuperScope",e.componentTag="render",e.optUpdateHandlers={blendMode:"updateProgram",channel:"updateChannel",clone:"updateClones",code:["updateCode","updateClones"],colors:"updateColors",cycleSpeed:"updateSpeed",drawMode:"updateDrawMode",source:"updateSource",thickness:"updateThickness"},e.defaultOptions={blendMode:"REPLACE",channel:"CENTER",clone:1,code:{init:"n=800",onBeat:"",perFrame:"t=t-0.05",perPoint:"d=i+v*0.2; r=t+i*$PI*4; x=cos(r)*d; y=sin(r)*d"},colors:["#ffffff"],cycleSpeed:.01,drawMode:"LINES",source:"SPECTRUM",thickness:1},e}(s.default);e.default=h},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(12),a=r(2),i=r(84),s=r(28),u=r(0),c=r(29),f=r(3),l=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.handleResize=function(){for(var t=0,e=this.code;t<e.length;t++){e[t].updateDimVars(this.main.getRctx().getGl())}},e.prototype.init=function(){var t=this.main.getRctx(),e=this.main.getRctx().getGl();this.program=new f.default(t,{bindings:{attribs:{colors:{name:"a_color",size:3},texVertices:{name:"a_texVertex"},vertices:{name:"a_vertex"}},index:{drawMode:e.TRIANGLES,valueName:"indices"},uniforms:{colorFilter:{name:"u_colorFilter",valueType:u.WebGLVarType._1I},image:{name:"u_image",valueType:u.WebGLVarType.TEXTURE2D}}},copyOnSwap:!0,fragmentShader:"\n                uniform bool u_colorFilter;\n                uniform sampler2D u_image;\n                varying vec2 v_texVertex;\n                varying vec3 v_color;\n                void main() {\n                   vec3 outColor = texture2D(u_image, v_texVertex).rgb;\n                   if(u_colorFilter) {\n                       outColor = outColor*v_color;\n                   }\n                   setFragColor(vec4(outColor, 1));\n                }\n            ",vertexShader:"\n                uniform bool u_colorFilter;\n                attribute vec2 a_texVertex;\n                attribute vec2 a_vertex;\n                attribute vec3 a_color;\n                varying vec2 v_texVertex;\n                varying vec3 v_color;\n                void main() {\n                   if(u_colorFilter) {\n                       v_color = a_color;\n                   }\n                   v_texVertex = a_texVertex;\n                   setPosition(a_vertex);\n                }\n            "}),this.updateCode(),this.updateClone(),this.updateImage(),this.updateSource(),this.listenTo(this.main,"resize",this.handleResize),this.vertexBuffer=new c.default(t),this.texVertexBuffer=new c.default(t),this.colorBuffer=new c.default(t),this.indexBuffer=new c.default(t,!0)},e.prototype.draw=function(){var t=this;o.default(this.code,function(e){t._drawScope(e,!t.inited)}),this.inited=!0},e.prototype.destroy=function(){var e=this.main.getRctx().getGl();t.prototype.destroy.call(this),this.program.destroy(),e.deleteTexture(this.texture),this.vertexBuffer.destroy(),this.texVertexBuffer.destroy(),this.colorBuffer.destroy(),this.indexBuffer.destroy()},e.prototype.updateCode=function(){var t=s.default(this.opts.code,["init","onBeat","perFrame","perPoint"]).codeInst;t.n=100,t.setup(this.main),this.inited=!1,this.code=[t]},e.prototype.updateClone=function(){this.code=i.default.clone(this.code,this.opts.clone)},e.prototype.updateImage=function(){var t=this,e=this.main.getRctx().getGl();this.main.getRsrcMan().getImage(this.opts.imageSrc,function(r){t.imageWidth=r.width,t.imageHeight=r.height,t.texture?e.bindTexture(e.TEXTURE_2D,t.texture):(t.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})},e.prototype.updateSource=function(){this.source=u.Source[this.opts.source]},e.prototype._drawScope=function(t,e){var r=this.main.getRctx().getGl();e&&t.init();var n=this.main.getAnalyser().isBeat();t.b=n?1:0,t.perFrame(),n&&t.onBeat();var o,a=Math.floor(t.n);o=this.source===u.Source.SPECTRUM?this.main.getAnalyser().getSpectrum():this.main.getAnalyser().getWaveform();for(var i=o.length/a,s=[],c=[],f=[],l=this.opts.colorFiltering?[]:null,p=0,h=function(t,e,r,n,o,a,i){t<-1-r||t>1||e<-1-n||e>1||(s.push(t,e,t+r,e,t+r,e+n,t,e+n),c.push(0,0,1,0,1,1,0,1),l&&l.push(o,a,i,o,a,i,o,a,i,o,a,i),f.push(p+0,p+1,p+2,p+0,p+2,p+3),p+=4)},d=this.imageWidth/r.drawingBufferWidth*2,v=this.imageHeight/r.drawingBufferHeight*2,b=0;b<a;b++){for(var _=0,y=0,m=Math.floor(b*i);m<(b+1)*i;m++,y++)_+=o[m];_/=y;var g=b/(a-1);t.i=g,t.v=_,t.sizex=1,t.sizey=1,t.red=1,t.green=1,t.blue=1,t.perPoint();var O=d,x=v;this.opts.resizing&&(O*=t.sizex,x*=t.sizey);var j=t.x-O/2,T=-t.y-x/2;if(h(j,T,O,x,t.red,t.green,t.blue),this.opts.wrapAround){var E=j<-1?2:j>1-O?-2:0,A=T<-1?2:T>1-x?-2:0;E&&h(E+j,T,O,x,t.red,t.green,t.blue),A&&h(j,A+T,O,x,t.red,t.green,t.blue),E&&A&&h(E+j,A+T,O,x,t.red,t.green,t.blue)}}this.vertexBuffer.setData(s),this.texVertexBuffer.setData(c),this.indexBuffer.setData(new Uint16Array(f)),l&&this.colorBuffer.setData(l),this.program.run(this.parent.getTSM(),{colorFilter:l?1:0,colors:l?this.colorBuffer:null,image:this.texture,indices:this.indexBuffer,texVertices:this.texVertexBuffer,vertices:this.vertexBuffer})},e.componentName="Texer",e.componentTag="render",e.optUpdateHandlers={clone:"updateClone",code:"updateCode",imageSrc:"updateImage",source:"updateSource"},e.defaultOptions={clone:1,code:{init:"",onBeat:"",perFrame:"",perPoint:""},colorFiltering:!0,imageSrc:"avsres_texer_circle_edgeonly_19x19.bmp",resizing:!1,source:"SPECTRUM",wrapAround:!1},e}(a.default);e.default=l},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(47),a=r(135),i=r(1),s=r(283),u=r(76),c=function(t){function e(e){var r=t.call(this)||this;return r.ready=!0,r.uris={},r.images={},r.waitImages={},r.waitCount=0,e?(i.default(e)||(e=[e]),r.packs=e):r.packs=[],r.clear(),r}return n(e,t),e.prototype.registerUri=function(t,e){if("string"==typeof t&&"string"==typeof e)this.uris[t]=e;else{var r=t;a.default(this.uris,r)}},e.prototype.get=function(t){if("uris"===t)return this.uris},e.prototype.toJSON=function(){return{uris:o.default(this.uris)}},e.prototype.clear=function(t){void 0===t&&(t=null);for(var e in this.waitImages)if(this.waitImages.hasOwnProperty(e)){var r=this.waitImages[e];r.onload=null,r.onerror=null}if(this.waitImages={},t){var n=function(e,r){return-1===t.indexOf(r)};this.uris=s.default(this.uris,n),this.images=s.default(this.images,n)}else this.uris={},this.images={};this.waitCount=0,this.ready=!0},e.prototype.getImage=function(t,e,r){var n=this,o=this.images[t];if(o)return void(e&&e(o));var a=this._getUri(t);if(!a)throw new Error("Unknown image file "+t);o=new Image,0!==a.indexOf("data:")&&(o.crossOrigin="anonymous"),o.onload=function(){delete n.waitImages[t],n.images[t]=o,e&&e(o),n._loadEnd()},r&&(o.onerror=function(){delete n.waitImages[t],r()&&n._loadEnd()}),this._loadStart(),o.src=a,this.waitImages[t]=o},e.prototype.setAttribute=function(t,e,r){return"uris"===t&&(this.uris=e,!0)},e.prototype._getUri=function(t){var e=this.uris[t];if(e)return e;for(var r=this.packs.length-1;r>=0;r--){var n=this.packs[r];if(-1!==n.fileNames.indexOf(t))return n.prefix+t}},e.prototype._loadStart=function(){1===++this.waitCount&&(this.ready=!1,this.emit("wait"))},e.prototype._loadEnd=function(){0===--this.waitCount&&(this.ready=!0,this.emit("ready"))},e}(u.default);e.default=c},function(t,e,r){"use strict";function n(t,e){if(null==t)return{};var r=Object(o.a)(Object(s.a)(t),function(t){return[t]});return e=Object(a.a)(e),Object(i.a)(t,r,function(t,r){return e(t,r[0])})}Object.defineProperty(e,"__esModule",{value:!0});var o=r(7),a=r(27),i=r(104),s=r(66);e.default=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o,a=r(285),i=r(2),s=r(0),u=r(3);!function(t){t[t.RGB=0]="RGB",t[t.RBG=1]="RBG",t[t.BRG=2]="BRG",t[t.BGR=3]="BGR",t[t.GBR=4]="GBR",t[t.GRB=5]="GRB"}(o||(o={}));var c=Object.keys(o).filter(function(t){return isNaN(parseInt(t,10))}),f=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.program=new u.default(this.main.getRctx(),{bindings:{uniforms:{channel:{name:"u_channel",valueType:s.WebGLVarType._1I}}},fragmentShader:"\n                uniform int u_channel;\n                void main() {\n                    vec3 color = getSrcColor().rgb;\n                    "+a.default(c,function(t){return"\n                            if(u_channel == "+o[t]+") {\n                                setFragColor(vec4(color."+t.toLowerCase()+", 1));\n                            }\n                        "}).join("\n")+"\n                }\n            ",swapFrame:!0}),this.updateChannel()},e.prototype.draw=function(){this.opts.onBeatRandom&&this.main.getAnalyser().isBeat()&&(this.channel=Math.floor(Math.random()*c.length)),this.program.run(this.parent.getTSM(),{channel:this.channel})},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy()},e.prototype.updateChannel=function(){this.channel=o[this.opts.channel]},e.componentName="ChannelShift",e.componentTag="trans",e.optUpdateHandlers={channel:"updateChannel"},e.defaultOptions={channel:"RGB",onBeatRandom:!1},e}(i.default);e.default=f},function(t,e,r){"use strict";function n(t,e){return Object(o.a)(Object(a.default)(t,e),1)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(26),a=r(13);e.default=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o,a=r(2),i=r(0),s=r(3);!function(t){t[t.BELOW=0]="BELOW",t[t.ABOVE=1]="ABOVE",t[t.NEAR=2]="NEAR"}(o||(o={}));var u=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.program=new s.default(this.main.getRctx(),{bindings:{uniforms:{color:{name:"u_color",valueType:i.WebGLVarType._3FV},level:{name:"u_level",valueType:i.WebGLVarType._1F},mode:{name:"u_mode",valueType:i.WebGLVarType._1I},outColor:{name:"u_outColor",valueType:i.WebGLVarType._3FV}}},fragmentShader:"\n                uniform int u_mode;\n                uniform vec3 u_color;\n                uniform vec3 u_outColor;\n                uniform float u_level;\n\n                void main() {\n                   vec4 inColor4 = getSrcColor();\n                   vec3 inColor = inColor4.rgb;\n                   bool clip = false;\n                   if(u_mode == 0) {\n                        clip = all(lessThanEqual(inColor, u_color));\n                   }\n                   if(u_mode == 1) {\n                        clip = all(greaterThanEqual(inColor, u_color));\n                   }\n                   if(u_mode == 2) {\n                        clip = (distance(inColor, u_color) <= u_level*0.5);\n                   }\n                   if(clip) {\n                       setFragColor(vec4(u_outColor, inColor4.a));\n                   } else {\n                       setFragColor(inColor4);\n                   }\n                }\n            ",swapFrame:!0}),this.updateColor(),this.updateMode()},e.prototype.draw=function(){this.program.run(this.parent.getTSM(),{color:this.color,level:this.opts.level,mode:this.mode,outColor:this.outColor})},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy()},e.prototype.updateMode=function(){this.mode=o[this.opts.mode]},e.prototype.updateColor=function(){this.color=i.parseColorNorm(this.opts.color),this.outColor=i.parseColorNorm(this.opts.outColor)},e.componentName="ColorClip",e.componentTag="trans",e.optUpdateHandlers={color:"updateColor",mode:"updateMode",outColor:"updateColor"},e.defaultOptions={color:"#202020",level:0,mode:"BELOW",outColor:"#202020"},e}(a.default);e.default=u},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o,a=r(12),i=r(288),s=r(111),u=r(13),c=r(290),f=r(136),l=r(83),p=r(137),h=r(133),d=r(295),v=r(2),b=r(0),_=r(3);!function(t){t[t.RED=0]="RED",t[t.GREEN=1]="GREEN",t[t.BLUE=2]="BLUE",t[t["(R+G+B)/2"]=3]="(R+G+B)/2",t[t["(R+G+B)/3"]=4]="(R+G+B)/3",t[t.MAX=5]="MAX"}(o||(o={}));var y;!function(t){t[t.SINGLE=0]="SINGLE",t[t.ONBEATRANDOM=1]="ONBEATRANDOM",t[t.ONBEATSEQUENTIAL=2]="ONBEATSEQUENTIAL"}(y||(y={}));var m=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.program=new _.default(this.main.getRctx(),{bindings:{uniforms:{colorMap:{name:"u_colorMap",valueType:b.WebGLVarType.TEXTURE2D},key:{name:"u_key",valueType:b.WebGLVarType._1I}}},dynamicBlend:!0,fragmentShader:"\n                uniform int u_key;\n                uniform sampler2D u_colorMap;\n                void main() {\n                   vec4 srcColor = getSrcColor();\n                   float key;\n                   if(u_key == "+o.RED+"          ) { key = srcColor.r; }\n                   if(u_key == "+o.GREEN+"        ) { key = srcColor.g; }\n                   if(u_key == "+o.BLUE+"         ) { key = srcColor.b; }\n                   if(u_key == "+o["(R+G+B)/2"]+" ) { key = min((srcColor.r+srcColor.g+srcColor.b)/2.0, 1.0); }\n                   if(u_key == "+o["(R+G+B)/3"]+" ) { key = (srcColor.r+srcColor.g+srcColor.b)/3.0; }\n                   if(u_key == "+o.MAX+"          ) { key = max(srcColor.r, max(srcColor.g, srcColor.b)); }\n                   setFragColor(texture2D(u_colorMap, vec2(key, 0)));\n                }\n            ",swapFrame:!0}),this.updateMap(),this.updateKey(),this.updateCycleMode(),this.updateBlendMode()},e.prototype.draw=function(){this.main.getAnalyser().isBeat()&&(this.mapCycleMode===y.ONBEATRANDOM?this.currentMap=Math.floor(Math.random()*this.opts.maps.length):this.mapCycleMode===y.ONBEATSEQUENTIAL&&(this.currentMap=(this.currentMap+1)%this.colorMaps.length)),this.program.run(this.parent.getTSM(),{colorMap:this.colorMaps[this.currentMap],key:this.key},this.blendMode)},e.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),this.program.destroy(),a.default(this.colorMaps,function(t){e.main.getRctx().getGl().deleteTexture(t)})},e.prototype.updateMap=function(){var t=this;this.colorMaps&&a.default(this.colorMaps,function(e){t.main.getRctx().getGl().deleteTexture(e)}),this.colorMaps=u.default(this.opts.maps,function(e){return t._buildColorMap(e)}),this.currentMap=0},e.prototype.updateCycleMode=function(){this.mapCycleMode=y[this.opts.mapCycleMode]},e.prototype.updateKey=function(){this.key=o[this.opts.key]},e.prototype.updateBlendMode=function(){this.blendMode=b.BlendMode[this.opts.output]},e.prototype._buildColorMap=function(t){var e=this.main.getRctx().getGl();t=c.default(t,function(t){return t.index});var r=u.default(t,function(t){return t.index});if(h.default(r).length!==r.length)throw new Error("map cannot have repeated indices");var n=u.default(t,function(t){return{color:b.parseColor(t.color),index:t.index}}),o=i.default(n);0!==o.index&&n.splice(0,0,{color:o.color,index:0});var v=s.default(n);255!==v.index&&n.push({color:v.color,index:255});var _=new Uint8Array(768),y=0,m=d.default(f.default(n,n.length-1),l.default(n,n.length-1));a.default(m,function(t){var e=t[0],r=t[1],n=r.index-e.index;p.default(n,function(t){_[y++]=Math.floor((e.color[0]*(n-t)+r.color[0]*t)/n),_[y++]=Math.floor((e.color[1]*(n-t)+r.color[1]*t)/n),_[y++]=Math.floor((e.color[2]*(n-t)+r.color[2]*t)/n)})}),_[y++]=v.color[0],_[y++]=v.color[1],_[y++]=v.color[2];var g=e.createTexture();return e.bindTexture(e.TEXTURE_2D,g),e.texImage2D(e.TEXTURE_2D,0,e.RGB,256,1,0,e.RGB,e.UNSIGNED_BYTE,_),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),g},e.componentName="ColorMap",e.componentTag="trans",e.optUpdateHandlers={key:"updateKey",mapCycleMode:"updateCycleMode",maps:"updateMap",output:"updateBlendMode"},e.defaultOptions={key:"RED",mapCycleMode:"SINGLE",maps:[[{index:0,color:"#000000"},{index:255,color:"#FFFFFF"}]],output:"REPLACE"},e}(v.default);e.default=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(289);r.d(e,"default",function(){return n.a})},function(t,e,r){"use strict";function n(t){return t&&t.length?t[0]:void 0}e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(26),o=r(291),a=r(9),i=r(70),s=Object(a.a)(function(t,e){if(null==t)return[];var r=e.length;return r>1&&Object(i.a)(t,e[0],e[1])?e=[]:r>2&&Object(i.a)(e[0],e[1],e[2])&&(e=[e[0]]),Object(o.a)(t,Object(n.a)(e,1),[])});e.default=s},function(t,e,r){"use strict";function n(t,e,r){var n=-1;e=Object(o.a)(e.length?e:[f.a],Object(u.a)(a.a));var l=Object(i.a)(t,function(t,r,a){return{criteria:Object(o.a)(e,function(e){return e(t)}),index:++n,value:t}});return Object(s.a)(l,function(t,e){return Object(c.a)(t,e,r)})}var o=r(7),a=r(27),i=r(123),s=r(292),u=r(16),c=r(293),f=r(18);e.a=n},function(t,e,r){"use strict";function n(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}e.a=n},function(t,e,r){"use strict";function n(t,e,r){for(var n=-1,a=t.criteria,i=e.criteria,s=a.length,u=r.length;++n<s;){var c=Object(o.a)(a[n],i[n]);if(c){if(n>=u)return c;return c*("desc"==r[n]?-1:1)}}return t.index-e.index}var o=r(294);e.a=n},function(t,e,r){"use strict";function n(t,e){if(t!==e){var r=void 0!==t,n=null===t,a=t===t,i=Object(o.a)(t),s=void 0!==e,u=null===e,c=e===e,f=Object(o.a)(e);if(!u&&!f&&!i&&t>e||i&&s&&c&&!u&&!f||n&&s&&c||!r&&c||!a)return 1;if(!n&&!i&&!f&&t<e||f&&r&&a&&!n&&!i||u&&r&&a||!s&&a||!c)return-1}return 0}var o=r(25);e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(9),o=r(296),a=Object(n.a)(o.a);e.default=a},function(t,e,r){"use strict";function n(t){if(!t||!t.length)return[];var e=0;return t=Object(o.a)(t,function(t){if(Object(u.a)(t))return e=c(t.length,e),!0}),Object(s.a)(e,function(e){return Object(a.a)(t,Object(i.a)(e))})}var o=r(63),a=r(7),i=r(114),s=r(54),u=r(44),c=Math.max;e.a=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o,a=r(1),i=r(298),s=r(2),u=r(0),c=r(3);!function(t){t[t.EXTEND=0]="EXTEND",t[t.WRAP=1]="WRAP"}(o||(o={}));var f=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.updateProgram(),this.updateScale()},e.prototype.draw=function(){this.program.run(this.parent.getTSM(),{scale:this.scale,bias:this.opts.bias})},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy()},e.prototype.updateScale=function(){var t=this.opts;t.autoScale?this.scale=i.default(t.kernel,function(t,e){return t+e},0):this.scale=t.scale},e.prototype.updateProgram=function(){var t=this.opts;if(!a.default(t.kernel)||t.kernel.length%2!=1)throw new Error("Invalid convolution kernel");var e=Math.floor(Math.sqrt(t.kernel.length));if(e*e!==t.kernel.length)throw new Error("Invalid convolution kernel");var r=o[this.opts.edgeMode],n="";switch(r){case o.WRAP:n="pos = vec2(pos.x<0?pos.x+1.0:pos.x%1, pos.y<0?pos.y+1.0:pos.y%1);";break;case o.EXTEND:n="pos = clamp(pos, vec2(0,0), vec2(1,1));"}for(var i=[],s=Math.floor(e/2),f=0;f<e;f++)for(var l=0;l<e;l++){var p=t.kernel[f*e+l];0!==p&&(i.push("pos = v_position + texel * vec2("+(l-s)+","+(s-f)+");"),i.push(n),i.push("colorSum += texture2D(u_srcTexture, pos) * "+u.glslFloatRepr(p)+";"))}var h=new c.default(this.main.getRctx(),{bindings:{uniforms:{bias:{name:"u_bias",valueType:u.WebGLVarType._1F},scale:{name:"u_scale",valueType:u.WebGLVarType._1F}}},fragmentShader:"\n                uniform float u_scale;\n                uniform float u_bias;\n                void main() {\n                   vec2 texel = 1.0/(u_resolution-vec2(1,1));\n                   vec2 pos;\n                   vec4 colorSum = vec4(0,0,0,0);\n                   "+i.join("\n")+"\n                   setFragColor(vec4(((colorSum+u_bias)/u_scale).rgb, 1.0));\n                }\n            ",swapFrame:!0});this.program&&this.program.destroy(),this.program=h},e.componentName="Convolution",e.componentTag="trans",e.optUpdateHandlers={edgeMode:"updateProgram",kernel:["updateProgram","updateScale"],scale:"updateScale"},e.defaultOptions={autoScale:!0,bias:0,edgeMode:"EXTEND",kernel:[0,0,0,0,1,0,0,0,0],scale:0},e}(s.default);e.default=f},function(t,e,r){"use strict";function n(t,e,r){var n=Object(u.default)(t)?o.a:s.a,c=arguments.length<3;return n(t,Object(i.a)(e,4),r,c,a.a)}Object.defineProperty(e,"__esModule",{value:!0});var o=r(299),a=r(42),i=r(27),s=r(300),u=r(1);e.default=n},function(t,e,r){"use strict";function n(t,e,r,n){var o=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++o]);++o<a;)r=e(r,t[o],o,t);return r}e.a=n},function(t,e,r){"use strict";function n(t,e,r,n,o){return o(t,function(t,o,a){r=n?(n=!1,t):e(r,t,o,a)}),r}e.a=n},function(t,e,r){"use strict";function n(t){return t===s.POLAR?"\n            float ar = u_resolution.x/u_resolution.y;\n            x=x*ar;\n            d = distance(vec2(x, y), vec2(0,0))/sqrt(2.0);\n            r = mod(atan(y, x)+PI*0.5, 2.0*PI);\n        ":""}function o(t){return t===s.POLAR?"\n            d = d*sqrt(2.0);\n            x = d*sin(r)/ar;\n            y = -d*cos(r);\n        ":""}function a(t,e){return t&&!e?"\n            vec3 filter(vec2 point) {\n               vec2 texel = 1.0/(u_resolution-vec2(1,1));\n               vec2 coord = (point+1.0)/2.0;\n               vec2 cornoff = fract(coord/texel);\n               vec2 corn = floor(coord/texel)*texel;\n\n               vec3 tl = getSrcColorAtPos(corn).rgb;\n               vec3 tr = getSrcColorAtPos(corn + vec2(texel.x, 0)).rgb;\n               vec3 bl = getSrcColorAtPos(corn + vec2(0, texel.y)).rgb;\n               vec3 br = getSrcColorAtPos(corn + texel).rgb;\n\n               vec3 pt = mix(tl, tr, cornoff.x);\n               vec3 pb = mix(bl, br, cornoff.x);\n               return mix(pt, pb, cornoff.y);\n            }\n        ":t&&e?"\n            vec3 filter(vec2 point) {\n               vec2 texel = 1.0/(u_resolution-vec2(1,1));\n               vec2 coord = (point+1.0)/2.0;\n               vec2 corn = floor(coord/texel)*texel;\n\n               ivec2 cornoff = (ivec2(fract(coord/texel)*255.0));\n\n               ivec3 tl = ivec3(255.0 * getSrcColorAtPos(corn).rgb);\n               ivec3 tr = ivec3(255.0 * getSrcColorAtPos(corn + vec2(texel.x, 0)).rgb);\n               ivec3 bl = ivec3(255.0 * getSrcColorAtPos(corn + vec2(0, texel.y)).rgb);\n               ivec3 br = ivec3(255.0 * getSrcColorAtPos(corn + texel).rgb);\n\n               #define bt(i, j) int((float(i)/255.0)*float(j))\n\n               int a1 = bt(255-cornoff.x,255-cornoff.y);\n               int a2 = bt(cornoff.x    ,255-cornoff.y);\n               int a3 = bt(255-cornoff.x,cornoff.y);\n               int a4 = bt(cornoff.x    ,cornoff.y);\n               float r = float(bt(a1,tl.r) + bt(a2,tr.r) + bt(a3,bl.r) + bt(a4,br.r))/255.0;\n               float g = float(bt(a1,tl.g) + bt(a2,tr.g) + bt(a3,bl.g) + bt(a4,br.g))/255.0;\n               float b = float(bt(a1,tl.b) + bt(a2,tr.b) + bt(a3,bl.b) + bt(a4,br.b))/255.0;\n               return vec3(r,g,b);\n            }\n        ":"\n            vec3 filter(vec2 point) {\n               return getSrcColorAtPos((point+1.0)/2.0).rgb;\n            }\n        "}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var s,u=r(2),c=r(28),f=r(0),l=r(29),p=r(3);!function(t){t[t.POLAR=0]="POLAR",t[t.RECT=1]="RECT"}(s||(s={}));var h=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return i(e,t),e.prototype.init=function(){this.updateCode(),this.updateGrid(),this.listenTo(this.main,"resize",this.handleResize)},e.prototype.draw=function(){var t=this.code;this.inited||(t.init(),this.inited=!0);var e=this.main.getAnalyser().isBeat();t.b=e?1:0,t.perFrame(),e&&t.onBeat(),this.program.run(this.parent.getTSM(),this.opts.noGrid?{}:{grid:this.gridVertexBuffer})},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy(),this.gridVertexBuffer&&this.gridVertexBuffer.destroy()},e.prototype.updateCode=function(){var t=c.default(this.opts.code,["init","onBeat","perFrame"],["perPixel"],["x","y","d","r","b","alpha"]),e=t.codeInst;e.setup(this.main),this.inited=!1,this.code=e,this.glslCode=t.glslCode,this.updateProgram()},e.prototype.updateProgram=function(){var t=this,e=this.opts,r=s[this.opts.coord],i=this.main.getRctx(),u={blendMode:e.blend?f.BlendMode.ALPHA:f.BlendMode.REPLACE,drawHook:function(e,r,n){return t.code.bindUniforms(n),!0},fragmentShader:"",swapFrame:!0};e.noGrid?u.fragmentShader="\n                "+this.glslCode+"\n                "+a(e.bFilter,e.compat)+"\n                void main() {\n                    "+(this.code.hasRandom?"__randSeed = v_position;":"")+"\n                    x = v_position.x*2.0-1.0;\n                    y = -(v_position.y*2.0-1.0);\n                    "+n(r)+"\n                    alpha=0.5;\n                    perPixel();\n                    "+o(r)+"\n                    setFragColor(vec4(filter(vec2(x, -y)), "+(e.blend?"alpha":"1.0")+"));\n                }\n            ":(u.bindings={attribs:{grid:{name:"a_position",drawMode:i.getGl().TRIANGLES}}},u.vertexShader="\n                attribute vec2 a_position;\n                varying vec2 v_newPoint;\n                varying float v_alpha;\n                "+this.glslCode+"\n                void main() {\n                    "+(this.code.hasRandom?"__randSeed = a_position;":"")+"\n                    x = a_position.x;\n                    y = -a_position.y;\n                    "+n(r)+"\n                    alpha = 0.5;\n                    perPixel();\n                    v_alpha = alpha;\n                    "+o(r)+"\n                    v_newPoint = vec2(x,-y);\n                    setPosition(a_position);\n                }\n            ",u.fragmentShader="\n                varying vec2 v_newPoint;\n                varying float v_alpha;\n                "+a(e.bFilter,e.compat)+"\n                void main() {\n                   setFragColor(vec4(filter(v_newPoint), "+(e.blend?"v_alpha":"1.0")+"));\n                }\n            ");var c=new p.default(i,u);this.program&&this.program.destroy(),this.program=c},e.prototype.updateGrid=function(){var t=this.opts,e=this.main.getRctx().getGl();if(!t.noGrid){for(var r=f.clamp(t.gridW,1,e.drawingBufferWidth),n=f.clamp(t.gridH,1,e.drawingBufferHeight),o=r/e.drawingBufferWidth*2,a=n/e.drawingBufferHeight*2,i=Math.ceil(e.drawingBufferWidth/r),s=Math.ceil(e.drawingBufferHeight/n),u=new Float32Array(i*s*6*2),c=0,p=-1,h=-1,d=0;d<s;d++){for(var v=0;v<i;v++){var b=Math.min(p+o,1),_=Math.min(h+a,1);u[c++]=p,u[c++]=h,u[c++]=b,u[c++]=h,u[c++]=p,u[c++]=_,u[c++]=b,u[c++]=h,u[c++]=b,u[c++]=_,u[c++]=p,u[c++]=_,p+=o}p=-1,h+=a}this.gridVertexBuffer||(this.gridVertexBuffer=new l.default(this.main.getRctx())),this.gridVertexBuffer.setData(u)}},e.prototype.handleResize=function(){this.code.updateDimVars(this.main.getRctx().getGl())},e.componentName="DynamicMovement",e.componentTag="trans",e.optUpdateHandlers={bFilter:"updateProgram",blend:"updateProgram",code:"updateCode",compat:"updateProgram",coord:"updateProgram",gridH:"updateGrid",gridW:"updateGrid",noGrid:["updateProgram","updateGrid"]},e.defaultOptions={bFilter:!0,blend:!1,code:{init:"",onBeat:"",perFrame:"",perPixel:""},compat:!1,coord:"POLAR",gridH:16,gridW:16,noGrid:!1},e}(u.default);e.default=h},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(0),i=r(139),s=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.program=new i.default(this.main.getRctx(),a.BlendMode.AVERAGE),this.updateSpeed(),this.updateColor()},e.prototype.draw=function(){++this.frameCount===this.maxFrameCount&&(this.frameCount=0,this.program.run(this.parent.getTSM(),{color:this.color}))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy()},e.prototype.updateSpeed=function(){this.frameCount=0,this.maxFrameCount=Math.floor(1/this.opts.speed)},e.prototype.updateColor=function(){this.color=a.parseColorNorm(this.opts.color)},e.componentName="FadeOut",e.componentTag="trans",e.optUpdateHandlers={color:"updateColor",speed:"updateSpeed"},e.defaultOptions={color:"#000000",speed:1},e}(o.default);e.default=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(3),i=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.program=new a.default(this.main.getRctx(),{fragmentShader:"\n                void main() {\n                   setFragColor(vec4(1,1,1,1)-getSrcColor());\n                }\n            ",swapFrame:!0})},e.prototype.draw=function(){this.program.run(this.parent.getTSM(),null)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy()},e.componentName="Invert",e.componentTag="trans",e}(o.default);e.default=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(0),i=r(3),s=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype._setMix=function(t){if(this.opts.smoothTransition&&!t){if(0===this.animFrameCount)for(var e=0;e<4;e++){var r=this.mix[e][0];this.mix[e][0]=0,this.mix[e][r]=1}for(var e=0;e<4;e++)for(var n=0;n<4;n++){var o=n===this.map[e]?1:0;this.mixDelta[e][n]=(o-this.mix[e][n])/this.opts.transitionDuration}this.animFrameCount=this.opts.transitionDuration}else for(var e=0;e<4;e++){this.mix[e][0]=this.map[e];for(var n=1;n<4;n++)this.mix[e][n]=0}},e.prototype.init=function(){this.program=new i.default(this.main.getRctx(),{bindings:{uniforms:{mix0:{name:"u_mix0",valueType:a.WebGLVarType._4FV},mix1:{name:"u_mix1",valueType:a.WebGLVarType._4FV},mix2:{name:"u_mix2",valueType:a.WebGLVarType._4FV},mix3:{name:"u_mix3",valueType:a.WebGLVarType._4FV},transition:{name:"u_mode",valueType:a.WebGLVarType._1I}}},fragmentShader:"\n                uniform int u_mode;\n                uniform vec4 u_mix0;\n                uniform vec4 u_mix1;\n                uniform vec4 u_mix2;\n                uniform vec4 u_mix3;\n\n                #define getQuadrant(pos) ( (pos.x<0.5) ? (pos.y<0.5?2:0) : (pos.y<0.5?3:1) )\n                #define check(a,b, c,d,e,f) ( ((a==c || a==d) && (b==e || b==f)) || ((a==e || a==f) && (b==c || b==d)) )\n                #define xFlip(qa, qb) (check(qa,qb, 0,2, 1,3)?-1:1)\n                #define yFlip(qa, qb) (check(qa,qb, 0,1, 2,3)?-1:1)\n                #define mirrorPos(pos,qa,qb) ((pos-vec2(0.5,0.5))*vec2(xFlip(qa,qb),yFlip(qa,qb))+vec2(0.5,0.5))\n                #define getMirrorColor(pos,qa,qb) (getSrcColorAtPos(mirrorPos(pos,qa,qb)))\n\n                void main() {\n                    int quadrant = getQuadrant(v_position);\n                    vec4 mix;\n                    if(quadrant == 0)      { mix = u_mix0; }\n                    else if(quadrant == 1) { mix = u_mix1; }\n                    else if(quadrant == 2) { mix = u_mix2; }\n                    else if(quadrant == 3) { mix = u_mix3; }\n                    if(u_mode == 0) {\n                        int otherQuadrant = int(mix.x);\n                        setFragColor(getMirrorColor(v_position, quadrant, otherQuadrant));\n                    } else {\n                        vec4 c0 = getMirrorColor(v_position, quadrant, 0);\n                        vec4 c1 = getMirrorColor(v_position, quadrant, 1);\n                        vec4 c2 = getMirrorColor(v_position, quadrant, 2);\n                        vec4 c3 = getMirrorColor(v_position, quadrant, 3);\n\n                        setFragColor(vec4(\n                            dot(vec4(c0.r,c1.r,c2.r,c3.r), mix),\n                            dot(vec4(c0.g,c1.g,c2.g,c3.g), mix),\n                            dot(vec4(c0.b,c1.b,c2.b,c3.b), mix),\n                            1.0\n                        ));\n                    }\n                }\n            ",swapFrame:!0}),this.animFrameCount=0,this.mix=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[3,0,0,0]],this.mixDelta=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.updateMap()},e.prototype.draw=function(){if(this.opts.onBeatRandom&&this.main.getAnalyser().isBeat()&&this._setQuadrantMap(!0),this.program.run(this.parent.getTSM(),{mix0:this.mix[0],mix1:this.mix[1],mix2:this.mix[2],mix3:this.mix[3],transition:this._inTransition()?1:0}),this._inTransition())if(0===--this.animFrameCount)this._setMix(!0);else for(var t=0;t<4;t++)for(var e=0;e<4;e++)this.mix[t][e]+=this.mixDelta[t][e]},e.prototype.updateMap=function(){this._setQuadrantMap()},e.prototype._inTransition=function(){return this.opts.smoothTransition&&0!==this.animFrameCount},e.prototype._setQuadrantMap=function(t){void 0===t&&(t=!1);var e=[0,1,2,3],r=this.opts;if(t){var n=Math.floor(16*Math.random());r={bottomToTop:2&n&&this.opts.bottomToTop,leftToRight:4&n&&this.opts.leftToRight,rightToLeft:8&n&&this.opts.rightToLeft,topToBottom:1&n&&this.opts.topToBottom}}r.topToBottom&&(e[2]=e[0],e[3]=e[1]),r.bottomToTop&&(e[0]=e[2],e[1]=e[3]),r.leftToRight&&(e[1]=e[0],e[3]=e[2]),r.rightToLeft&&(e[0]=e[1],e[2]=e[3]),this.map=e,this._setMix(!1)},e.componentName="Mirror",e.componentTag="trans",e.optUpdateHandlers={bottomToTop:"updateMap",leftToRight:"updateMap",rightToLeft:"updateMap",topToBottom:"updateMap"},e.defaultOptions={bottomToTop:!1,leftToRight:!1,onBeatRandom:!1,rightToLeft:!1,smoothTransition:!1,topToBottom:!0,transitionDuration:4},e}(o.default);e.default=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(0),i=r(3),s=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.frameCount=0,this.size=this.opts.squareSize,this.updateProgram()},e.prototype.draw=function(){var t=this.main.getRctx().getGl();if(this.opts.onBeatSizeChange&&this.main.getAnalyser().isBeat()&&(this.size=this.opts.onBeatSquareSize,this.frameCount=this.opts.onBeatSizeDuration),0!==this.size){var e=1/Math.floor(this.size*(t.drawingBufferWidth-1)+1),r=1/Math.floor(this.size*(t.drawingBufferHeight-1)+1);this.program.run(this.parent.getTSM(),{size:[e,r]})}if(this.frameCount>0)if(0===--this.frameCount)this.size=this.opts.squareSize;else{var n=Math.abs(this.opts.squareSize-this.opts.onBeatSquareSize)/this.opts.onBeatSizeDuration;this.size+=n*(this.opts.onBeatSquareSize>this.opts.squareSize?-1:1)}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy()},e.prototype.updateProgram=function(){var t=a.BlendMode[this.opts.blendMode],e=new i.default(this.main.getRctx(),{bindings:{uniforms:{size:{name:"u_size",valueType:a.WebGLVarType._2FV}}},blendMode:t,fragmentShader:"\n                uniform vec2 u_size;\n                void main() {\n                    vec2 samplePos = u_size * ( floor(v_position/u_size) + vec2(0.5,0.5) );\n                    setFragColor(getSrcColorAtPos(samplePos));\n                }\n            ",swapFrame:!0});this.program&&this.program.destroy(),this.program=e},e.componentName="Mosaic",e.componentTag="trans",e.defaultOptions={blendMode:"REPLACE",onBeatSizeChange:!1,onBeatSizeDuration:10,onBeatSquareSize:1,squareSize:.5},e.optUpdateHandlers={blendMode:"updateProgram"},e}(o.default);e.default=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(2),a=r(0),i=r(3),s=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return n(e,t),e.prototype.init=function(){this.updateColor(),this.updateProgram()},e.prototype.draw=function(){this.program.run(this.parent.getTSM(),{invert:this.opts.invert?1:0,tone:this.tone})},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.program.destroy()},e.prototype.updateColor=function(){this.tone=a.parseColorNorm(this.opts.color)},e.prototype.updateProgram=function(){var t=a.BlendMode[this.opts.blendMode],e=new i.default(this.main.getRctx(),{bindings:{uniforms:{invert:{name:"u_invert",valueType:a.WebGLVarType._1F},tone:{name:"u_tone",valueType:a.WebGLVarType._3FV}}},blendMode:t,fragmentShader:"\n                uniform vec3 u_tone;\n                uniform bool u_invert;\n                void main() {\n                   vec4 srcColor = getSrcColor();\n                   float depth = max(srcColor.r, max(srcColor.g, srcColor.b));\n                   if(u_invert) {\n                       depth = 1.0-depth;\n                   }\n                   setFragColor(vec4(depth*u_tone, 1));\n                }\n            ",swapFrame:!0});this.program&&this.program.destroy(),this.program=e},e.componentName="UniqueTone",e.componentTag="trans",e.defaultOptions={blendMode:"REPLACE",color:"#ffffff",invert:!1},e.optUpdateHandlers={blendMode:"updateProgram",color:"updateColor"},e}(o.default);e.default=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(0),a=r(3),i=function(t){function e(e,r){return void 0===r&&(r=!1),t.call(this,e,{bindings:{uniforms:{srcTexture:{name:"u_copySource",valueType:o.WebGLVarType.TEXTURE2D}}},dynamicBlend:r,fragmentShader:"\n                uniform sampler2D u_copySource;\n                void main() {\n                setFragColor(texture2D(u_copySource, v_position));\n                }\n            "})||this}return n(e,t),e}(a.default);e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t){this.gl=t,this.buffers={}}return t.prototype.getGl=function(){return this.gl},t.prototype.cacheBuffer=function(t,e){this.buffers[t]=e},t.prototype.getBuffer=function(t){return this.buffers[t]},t}();e.default=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();e.__esModule=!0;var o=r(24),a=r(0),i=r(140),s=function(t){function e(e){var r=t.call(this)||this;if(r.movingThreshold=0,e=o.default(e||{},{decay:.02,fftSize:512,threshold:.125}),e.context)r.context=e.context;else if(window.webkitAudioContext)r.context=new window.webkitAudioContext;else{if(!window.AudioContext)throw new Error("Cannot create webaudio context");r.context=new window.AudioContext}r.fftSize=e.fftSize,r.threshold=e.threshold,r.decay=e.decay,r.visData=[null,null,null];for(var n=0;n<3;n++){var a=new Float32Array(r.fftSize/2),i=new Float32Array(r.fftSize);r.visData[n]={spectrum:a,waveform:i}}return r}return n(e,t),e.prototype.connectToNode=function(t){this.source=t,this.gain=this.context.createGain(),this.gain.channelCountMode="explicit",this.gain.channelCount=2,this.source.connect(this.gain),this.channelSplit=this.context.createChannelSplitter(2),this.gain.connect(this.channelSplit),this.analysers=[null,null];for(var e=0;e<2;e++){var r=this.context.createAnalyser();r.fftSize=this.fftSize,this.channelSplit.connect(r,e),this.analysers[e]=r}},e.prototype.update=function(){if(this.analysers){for(var t=new Uint8Array(this.fftSize),e=0;e<2;e++){var r=this.visData[e+1],n=this.analysers[e];n.getByteFrequencyData(t);for(var o=0;o<r.spectrum.length;o++)r.spectrum[o]=t[o]/255;n.getByteTimeDomainData(t);for(var o=0;o<r.waveform.length;o++)r.waveform[o]=t[o]/255*2-1}for(var a=this.visData[0],o=0;o<a.spectrum.length;o++)a.spectrum[o]=this.visData[1].spectrum[o]/2+this.visData[2].spectrum[o]/2;for(var o=0;o<a.waveform.length;o++)a.waveform[o]=this.visData[1].waveform[o]/2+this.visData[2].waveform[o]/2;this.beat=!1;for(var i=0,s=0,o=0;o<this.fftSize;o++)i+=Math.abs(this.visData[1].waveform[o]),s+=Math.abs(this.visData[2].waveform[o]);var u=Math.max(i,s)/this.fftSize;u>=this.movingThreshold&&u>=this.threshold?(this.movingThreshold=u,this.beat=!0):this.movingThreshold=this.movingThreshold*(1-this.decay)+u*this.decay}},e.prototype.load=function(t,e){var r,n=this;t instanceof HTMLMediaElement?(r=t,this.source=this.context.createMediaElementSource(r)):(r=new Audio,r.src=t,this.source=this.context.createMediaElementSource(r));var o=function(){n.connectToNode(n.source),n.source.connect(n.context.destination),e&&e(r),r.removeEventListener("canplay",o)};return r.readyState<3?r.addEventListener("canplay",o):o(),r},e.prototype.getWaveform=function(t){return void 0===t&&(t=a.Channels.CENTER),this.visData[t].waveform},e.prototype.getSpectrum=function(t){return void 0===t&&(t=a.Channels.CENTER),this.visData[t].spectrum},e.prototype.isBeat=function(){return this.beat},e}(i.default);e.default=s}]).default;